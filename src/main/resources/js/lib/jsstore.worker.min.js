/*!
 * @license :jsstore - V3.13.6 - 20/04/2021
 * https://github.com/ujjwalguptaofficial/JsStore
 * Copyright (c) 2021 @Ujjwal Gupta; Licensed MIT
 */
var JsStoreWorker = (function (e) {
    var t = {};
    function n(r) {
        if (t[r]) return t[r].exports;
        var o = (t[r] = { i: r, l: !1, exports: {} });
        return e[r].call(o.exports, o, o.exports, n), (o.l = !0), o.exports;
    }
    return (
        (n.m = e),
        (n.c = t),
        (n.d = function (e, t, r) {
            n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r });
        }),
        (n.r = function (e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 });
        }),
        (n.t = function (e, t) {
            if ((1 & t && (e = n(e)), 8 & t)) return e;
            if (4 & t && "object" == typeof e && e && e.__esModule) return e;
            var r = Object.create(null);
            if ((n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e))
                for (var o in e)
                    n.d(
                        r,
                        o,
                        function (t) {
                            return e[t];
                        }.bind(null, o)
                    );
            return r;
        }),
        (n.n = function (e) {
            var t =
                e && e.__esModule
                    ? function () {
                          return e.default;
                      }
                    : function () {
                          return e;
                      };
            return n.d(t, "a", t), t;
        }),
        (n.o = function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
        }),
        (n.p = ""),
        n((n.s = 10))
    );
})({
    10: function (e, t, n) {
        "use strict";
        var r, o, i, u, c, s, a, l, h, f;
        n.r(t),
            n.d(t, "QueryExecutor", function () {
                return Ft;
            }),
            n.d(t, "initialize", function () {
                return Bt;
            }),
            n.d(t, "Config", function () {
                return V;
            }),
            n.d(t, "KeyStore", function () {
                return B;
            }),
            (function (e) {
                (e.WorkerNotSupplied = "worker_not_supplied"),
                    (e.IndexedDbUndefined = "indexeddb_undefined"),
                    (e.UndefinedColumn = "undefined_column"),
                    (e.UndefinedValue = "undefined_value"),
                    (e.UndefinedColumnName = "undefined_column_name"),
                    (e.UndefinedDbName = "undefined_database_name"),
                    (e.UndefinedColumnValue = "undefined_column_value"),
                    (e.NotArray = "not_array"),
                    (e.NoValueSupplied = "no_value_supplied"),
                    (e.ColumnNotExist = "column_not_exist"),
                    (e.EnableSearchOff = "enable_search_off"),
                    (e.InvalidOp = "invalid_operator"),
                    (e.NullValue = "null_value"),
                    (e.WrongDataType = "wrong_data_type"),
                    (e.TableNotExist = "table_not_exist"),
                    (e.DbNotExist = "db_not_exist"),
                    (e.ConnectionAborted = "connection_aborted"),
                    (e.ConnectionClosed = "connection_closed"),
                    (e.NotObject = "not_object"),
                    (e.InvalidConfig = "invalid_config"),
                    (e.DbBlocked = "Db_blocked"),
                    (e.IndexedDbNotSupported = "indexeddb_not_supported"),
                    (e.NullValueInWhere = "null_value_in_where"),
                    (e.InvalidJoinQuery = "invalid_join_query"),
                    (e.InvalidOrderQuery = "invalid_order_query"),
                    (e.InvalidQuery = "invalid_query"),
                    (e.InvalidGroupQuery = "invalid_group_query"),
                    (e.ImportScriptsFailed = "import_scripts_failed"),
                    (e.MethodNotExist = "method_not_exist");
            })(r || (r = {})),
            (function (e) {
                (e.Registered = "registerd"), (e.Failed = "failed"), (e.NotStarted = "not_started");
            })(o || (o = {})),
            (function (e) {
                (e.String = "string"), (e.Object = "object"), (e.Array = "array"), (e.Number = "number"), (e.Boolean = "boolean"), (e.Null = "null"), (e.DateTime = "date_time");
            })(i || (i = {})),
            (function (e) {
                (e.InitDb = "init_db"),
                    (e.IsDbExist = "is_db_exist"),
                    (e.GetDbVersion = "get_db_version"),
                    (e.GetDbList = "get_db_list"),
                    (e.Get = "get"),
                    (e.Set = "set"),
                    (e.Select = "select"),
                    (e.Insert = "insert"),
                    (e.Update = "update"),
                    (e.Remove = "remove"),
                    (e.GetDbSchema = "get_db_schema"),
                    (e.OpenDb = "open_db"),
                    (e.Clear = "clear"),
                    (e.DropDb = "drop_db"),
                    (e.Count = "count"),
                    (e.ChangeLogStatus = "change_log_status"),
                    (e.Terminate = "terminate"),
                    (e.Transaction = "transaction"),
                    (e.InitKeyStore = "init_keystore"),
                    (e.CloseDb = "close_db"),
                    (e.Union = "union"),
                    (e.Intersect = "intersect"),
                    (e.ImportScripts = "import_scripts");
            })(u || (u = {})),
            (function (e) {
                (e.RequestQueueEmpty = "requestQueueEmpty"), (e.RequestQueueFilled = "requestQueueFilled");
            })(c || (c = {})),
            (function (e) {
                (e.Where = "where"),
                    (e.Like = "like"),
                    (e.Regex = "regex"),
                    (e.In = "in"),
                    (e.Equal = "="),
                    (e.Between = "-"),
                    (e.GreaterThan = ">"),
                    (e.LessThan = "<"),
                    (e.GreaterThanEqualTo = ">="),
                    (e.LessThanEqualTo = "<="),
                    (e.NotEqualTo = "!="),
                    (e.Aggregate = "aggregate"),
                    (e.Max = "max"),
                    (e.Min = "min"),
                    (e.Avg = "avg"),
                    (e.Count = "count"),
                    (e.Sum = "sum"),
                    (e.Or = "or"),
                    (e.Skip = "skip"),
                    (e.Limit = "limit"),
                    (e.And = "and"),
                    (e.IgnoreCase = "ignoreCase"),
                    (e.Then = "then");
            })(s || (s = {})),
            (function (e) {
                (e.ReadOnly = "readonly"), (e.ReadWrite = "readwrite");
            })(a || (a = {})),
            (function (e) {
                (e.First = "f"), (e.Last = "l"), (e.Any = "a");
            })(l || (l = {})),
            (function (e) {
                (e.Connected = "connected"), (e.Closed = "closed"), (e.NotStarted = "not_started"), (e.UnableToStart = "unable_to_start"), (e.ClosedByJsStore = "closed_by_jsstore");
            })(h || (h = {})),
            (function (e) {
                (e.Connected = "connected"), (e.Closed = "closed"), (e.NotStarted = "not_connected");
            })(f || (f = {}));
        var p,
            y,
            d,
            b,
            _,
            v,
            m,
            g,
            O,
            S,
            w,
            x,
            k,
            E,
            D = (function () {
                function e() {
                    (this.results = null), (this.errorOccured = !1), (this.errorCount = 0);
                }
                return (
                    (e.prototype.onErrorOccured = function (e) {
                        ++this.errorCount, 1 === this.errorCount && null != this.onError && this.onError(e.target.error), console.error(e);
                    }),
                    e
                );
            })(),
            q = (function () {
                function e() {}
                return (
                    (e.callDbDroppedByBrowser = function () {
                        e.isDbDeletedByBrowser = e.dbStatus.conStatus === f.Connected;
                    }),
                    (e.createTransaction = function (t, n, r) {
                        null === e.transaction &&
                            ((r = r || "readwrite"),
                            (e.transaction = e.dbConnection.transaction(t, r)),
                            (e.transaction.oncomplete = function () {
                                (e.transaction = null), n();
                            }),
                            (e.transaction.ontimeout = function () {
                                (this._transaction = null), console.error("transaction timed out");
                            }));
                    }),
                    (e.transaction = null),
                    (e.dbStatus = { conStatus: f.NotStarted }),
                    e
                );
            })(),
            C =
                ((p = function (e, t) {
                    return (p =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(e, t);
                }),
                function (e, t) {
                    function n() {
                        this.constructor = e;
                    }
                    p(e, t), (e.prototype = null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
                }),
            T = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (o.rowAffected = 0), (o.key = t), (o.onSuccess = n), (o.onError = r), o;
                }
                return (
                    C(t, e),
                    (t.prototype.execute = function () {
                        var e = this;
                        this.initTransaction();
                        var t, n, r;
                        this.errorOccured ||
                            ((t = F.columnName),
                            (n = this.key),
                            ((r = e.objectStore.index(t).openCursor(IDBKeyRange.only(n))).onerror = function (t) {
                                (e.errorOccured = !0), e.onErrorOccured(t);
                            }),
                            (r.onsuccess = function (t) {
                                var n = t.target.result;
                                n && (n.delete(), ++e.rowAffected, n.continue());
                            }));
                    }),
                    (t.prototype.initTransaction = function () {
                        q.createTransaction([F.tableName], this.onTransactionCompleted.bind(this)), (this.objectStore = q.transaction.objectStore(F.tableName));
                    }),
                    (t.prototype.onTransactionCompleted = function () {
                        !1 === this.errorOccured && this.onSuccess(this.rowAffected);
                    }),
                    t
                );
            })(D),
            j = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            I = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    o.onTransactionCompleted_ = function () {
                        !1 === o.errorOccured && o.onSuccess && o.onSuccess(null);
                    };
                    try {
                        (o.query = t), (o.onSuccess = n), (o.onError = r);
                    } catch (e) {
                        console.error(e);
                    }
                    return o;
                }
                return (
                    j(t, e),
                    (t.prototype.execute = function () {
                        var e,
                            t = this,
                            n = function () {
                                t.objectStore.add(t.query).onerror = function (e) {
                                    (t.errorOccured = !0), t.onErrorOccured(e);
                                };
                            };
                        this.initTransaction(),
                            ((e = t.objectStore.index(F.columnName).openCursor(IDBKeyRange.only(t.query[F.columnName]))).onsuccess = function (e) {
                                var r = e.target.result;
                                r ? r.update(t.query) : n();
                            }),
                            (e.onerror = function (e) {
                                (t.errorOccured = !0), t.onErrorOccured(e);
                            });
                    }),
                    (t.prototype.initTransaction = function () {
                        q.createTransaction([F.tableName], this.onTransactionCompleted_), (this.objectStore = q.transaction.objectStore(F.tableName));
                    }),
                    t
                );
            })(D),
            A = (function () {
                function e() {}
                return (
                    (e.updateDbStatus = function (e, t) {
                        void 0 === t ? (q.dbStatus.conStatus = e) : (q.dbStatus = { conStatus: e, lastError: t });
                    }),
                    e
                );
            })(),
            N = function (e, t, n) {
                var o = self.indexedDB.open(e, 1);
                (q.isDbDeletedByBrowser = !1),
                    (o.onerror = function (e) {
                        "InvalidStateError" === e.target.error.name ? n({ message: "Indexeddb is blocked", type: r.IndexedDbNotSupported }) : n(e.target.error);
                    }),
                    (o.onsuccess = function (e) {
                        (q.dbStatus.conStatus = f.Connected),
                            (q.dbConnection = o.result),
                            (q.dbConnection.onclose = function () {
                                q.callDbDroppedByBrowser(), A.updateDbStatus(f.Closed, r.ConnectionClosed);
                            }),
                            (q.dbConnection.onversionchange = function (e) {
                                null === e.newVersion && (e.target.close(), q.callDbDroppedByBrowser(), A.updateDbStatus(f.Closed, r.ConnectionClosed));
                            }),
                            (q.dbConnection.onerror = function (e) {
                                q.dbStatus.lastError = "Error occured in connection :" + e.target.result;
                            }),
                            (q.dbConnection.onabort = function (e) {
                                q.dbStatus = { conStatus: f.Closed, lastError: "Connection aborted" };
                            }),
                            null != t && t();
                    }),
                    (o.onupgradeneeded = function (e) {
                        e.target.result.createObjectStore(F.tableName, { keyPath: "Key" }).createIndex("Key", "Key", { unique: !0 });
                    });
            },
            Q = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            L = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (
                        (o.onTransactionCompleted_ = function () {
                            !1 === o.errorOccured && o.onSuccess(o.results);
                        }),
                        (o.key = t),
                        (o.onSuccess = n),
                        (o.onError = r),
                        o
                    );
                }
                return (
                    Q(t, e),
                    (t.prototype.execute = function () {
                        var e,
                            t,
                            n,
                            r = this;
                        this.initTransaction_(),
                            (e = F.columnName),
                            (t = this.key),
                            ((n = r.objectStore.index(e).openCursor(IDBKeyRange.only(t))).onerror = function (e) {
                                (r.errorOccured = !0), r.onErrorOccured(e);
                            }),
                            (n.onsuccess = function (e) {
                                var t = e.target.result;
                                t && (r.results = t.value.Value);
                            });
                    }),
                    (t.prototype.initTransaction_ = function () {
                        q.createTransaction([F.tableName], this.onTransactionCompleted_, "readonly"), (this.objectStore = q.transaction.objectStore(F.tableName));
                    }),
                    t
                );
            })(D),
            R = (function () {
                function e(e) {
                    void 0 === e && (e = null), (this.onQueryFinished = e);
                }
                return (
                    (e.prototype.checkConnectionAndExecuteLogic = function (e) {
                        var t = this;
                        if ("init_db" === e.name) this.executeLogic(e);
                        else
                            switch (q.dbStatus.conStatus) {
                                case f.Connected:
                                    this.executeLogic(e);
                                    break;
                                case f.NotStarted:
                                    setTimeout(function () {
                                        t.checkConnectionAndExecuteLogic(e);
                                    }, 100);
                                    break;
                                case f.Closed:
                                    q.isDbDeletedByBrowser &&
                                        this.createDb(
                                            function () {
                                                (q.isDbDeletedByBrowser = !1), t.checkConnectionAndExecuteLogic(e);
                                            },
                                            function (e) {
                                                console.error(e);
                                            }
                                        );
                            }
                    }),
                    (e.prototype.returnResult = function (e) {
                        this.onQueryFinished(e);
                    }),
                    (e.prototype.executeLogic = function (e) {
                        var t = this,
                            n = function (e) {
                                t.returnResult({ returnedValue: e });
                            },
                            r = function (e) {
                                t.returnResult({ errorDetails: e, errorOccured: !0 });
                            };
                        switch (e.name) {
                            case "get":
                                this.get(e.query, n, r);
                                break;
                            case "set":
                                this.set(e.query, n, r);
                                break;
                            case "remove":
                                this.remove(e.query, n, r);
                                break;
                            case "init_db":
                                this.createDb(n, r);
                                break;
                            case "close_db":
                                this.closeDb(n, r);
                        }
                    }),
                    (e.prototype.set = function (e, t, n) {
                        new I(e, t, n).execute();
                    }),
                    (e.prototype.remove = function (e, t, n) {
                        new T(e, t, n).execute();
                    }),
                    (e.prototype.get = function (e, t, n) {
                        new L(e, t, n).execute();
                    }),
                    (e.prototype.createDb = function (e, t) {
                        new N("KeyStore", e, t);
                    }),
                    (e.prototype.closeDb = function (e, t) {
                        q.dbStatus.conStatus === f.Connected && ((q.dbStatus.conStatus = f.Closed), q.dbConnection.close()), e();
                    }),
                    e
                );
            })(),
            P = function (e) {
                return new Promise(e);
            },
            F = (function () {
                function e() {}
                return (
                    (e.prcoessQuery = function (e) {
                        var t = this;
                        return P(function (n, r) {
                            (e.onSuccess = function (e) {
                                n(e);
                            }),
                                (e.onError = function (e) {
                                    r(e);
                                }),
                                t.requestQueue.push(e),
                                t.executeCode();
                        });
                    }),
                    (e.executeCode = function () {
                        if (!this.isCodeExecuting && this.requestQueue.length > 0) {
                            this.isCodeExecuting = !0;
                            var e = { name: this.requestQueue[0].name, query: this.requestQueue[0].query };
                            new R(this.onQueryFinished.bind(this)).checkConnectionAndExecuteLogic(e);
                        }
                    }),
                    (e.onQueryFinished = function (e) {
                        var t = this.requestQueue.shift();
                        (this.isCodeExecuting = !1), e.errorOccured ? t.onError(e.errorDetails) : t.onSuccess(e.returnedValue), this.executeCode();
                    }),
                    (e.requestQueue = []),
                    (e.tableName = "LocalStore"),
                    (e.columnName = "Key"),
                    (e.isCodeExecuting = !1),
                    e
                );
            })(),
            B = (function () {
                function e() {}
                return (
                    (e.init = function () {
                        if (indexedDB) return F.prcoessQuery({ name: "init_db", query: null });
                    }),
                    (e.close = function () {
                        return F.prcoessQuery({ name: "close_db", query: null });
                    }),
                    (e.get = function (e) {
                        return F.prcoessQuery({ name: "get", query: e });
                    }),
                    (e.set = function (e, t) {
                        var n = { Key: e, Value: t };
                        return F.prcoessQuery({ name: "set", query: n });
                    }),
                    (e.remove = function (e) {
                        return F.prcoessQuery({ name: "remove", query: e });
                    }),
                    e
                );
            })(),
            V = (function () {
                function e() {}
                return (e.isLogEnabled = !1), (e.isRuningInWorker = !1), e;
            })(),
            W = (function () {
                function e(e, t) {
                    void 0 === t && (t = null), (this.type = e), (this.info_ = t), (this.message = this.getMsg_());
                }
                return (
                    (e.prototype.throw = function () {
                        throw this.get();
                    }),
                    (e.log = function (e) {
                        V.isLogEnabled && console.log(e);
                    }),
                    (e.prototype.logError = function () {
                        console.error(this.get());
                    }),
                    (e.prototype.get = function () {
                        return { message: this.message, type: this.type };
                    }),
                    (e.prototype.getMsg_ = function () {
                        var e;
                        switch (this.type) {
                            case r.NotArray:
                                e = "Supplied value is not an array";
                                break;
                            case r.UndefinedColumn:
                                e = "Column is undefined in Where";
                                break;
                            case r.UndefinedValue:
                                e = "Value is undefined in Where";
                                break;
                            case r.UndefinedColumnName:
                                e = "Column name is undefined '" + this.info_.TableName + "'";
                                break;
                            case r.UndefinedDbName:
                                e = "Database name is not supplied";
                                break;
                            case r.UndefinedColumnValue:
                                e = "Column value is undefined";
                                break;
                            case r.NoValueSupplied:
                                e = "No value is supplied";
                                break;
                            case r.InvalidOp:
                                e = "Invalid Op Value '" + this.info_.Op + "'";
                                break;
                            case r.ColumnNotExist:
                                e = this.info_.isOrder ? "Column '" + this.info_.column + "' in order query does not exist" : "Column '" + this.info_.column + "' does not exist";
                                break;
                            case r.EnableSearchOff:
                                e = "Search is turned off for the Column '" + this.info_.column + "'";
                                break;
                            case r.NullValue:
                                e = "Null value is not allowed for column '" + this.info_.ColumnName + "'";
                                break;
                            case r.WrongDataType:
                                e = "Supplied value for column '" + this.info_.column + "' have wrong data type";
                                break;
                            case r.TableNotExist:
                                e = "Table '" + this.info_.tableName + "' does not exist";
                                break;
                            case r.DbNotExist:
                                e = "Database with name " + this.info_.dbName + " does not exist";
                                break;
                            case r.NotObject:
                                e = "supplied value is not object";
                                break;
                            case r.InvalidOp:
                                e = "Invalid Config '" + this.info_.Config + " '";
                                break;
                            case r.DbBlocked:
                                e = "database is blocked, cant be deleted right now";
                                break;
                            case r.NullValueInWhere:
                                e = "Null/undefined is not allowed in where. Column '" + this.info_.column + "' has null";
                                break;
                            case r.InvalidJoinQuery:
                                e = this.info_;
                                break;
                            default:
                                e = this.message;
                        }
                        return e;
                    }),
                    e
                );
            })(),
            K = (function () {
                function e() {}
                return (
                    Object.defineProperty(e.prototype, "dbName", {
                        get: function () {
                            return M.activeDb.name;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    Object.defineProperty(e.prototype, "dbStatus", {
                        get: function () {
                            return M.dbStatus;
                        },
                        set: function (e) {
                            M.dbStatus = e;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    Object.defineProperty(e.prototype, "dbConnection", {
                        get: function () {
                            return M.dbConnection;
                        },
                        set: function (e) {
                            M.dbConnection = e;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.updateDbStatus = function (e, t) {
                        M.updateDbStatus(e, t);
                    }),
                    (e.prototype.onDbDroppedByBrowser = function (e) {
                        M.callDbDroppedByBrowser(e);
                    }),
                    Object.defineProperty(e.prototype, "dbVersion", {
                        get: function () {
                            return parseInt(M.activeDbVersion);
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    Object.defineProperty(e.prototype, "activeDb", {
                        get: function () {
                            return M.activeDb;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.getDbList = function () {
                        return M.getDbList();
                    }),
                    (e.prototype.setDbList = function (e) {
                        return M.setDbList(e);
                    }),
                    (e.prototype.onDbClose = function (e) {
                        this.onDbDroppedByBrowser(), this.updateDbStatus(h.Closed, r.ConnectionClosed);
                    }),
                    (e.prototype.onDbVersionChange = function (e) {
                        null === e.newVersion && (e.target.close(), this.onDbDroppedByBrowser(!0), this.updateDbStatus(h.Closed, r.ConnectionClosed));
                    }),
                    (e.prototype.onDbConError = function (e) {
                        M.dbStatus.lastError = "Error occured in connection :" + e.target.result;
                    }),
                    e
                );
            })(),
            G = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            J = (function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return (r.onSuccess_ = t), (r.onError_ = n), r;
                }
                return (
                    G(t, e),
                    (t.prototype.deleteMetaData = function () {
                        var e = this;
                        return P(function (t, n) {
                            B.remove("JsStore_" + e.dbName + "_Db_Version"),
                                e.activeDb.tables.forEach(function (t) {
                                    B.remove("JsStore_" + e.dbName + "_" + t.name + "_Version"),
                                        t.columns.forEach(function (n) {
                                            n.autoIncrement && B.remove("JsStore_" + e.dbName + "_" + t.name + "_" + n.name + "_Value");
                                        });
                                }),
                                e.getDbList().then(function (r) {
                                    r.splice(r.indexOf(e.dbName), 1),
                                        e.setDbList(r).then(function () {
                                            B.remove("JsStore_" + e.dbName + "_Schema")
                                                .then(t)
                                                .catch(n);
                                        });
                                });
                        });
                    }),
                    (t.prototype.deleteDb = function () {
                        var e = this;
                        setTimeout(function () {
                            var t = indexedDB.deleteDatabase(e.dbName);
                            (t.onblocked = function () {
                                null != e.onError_ && e.onError_(new W(r.DbBlocked).get());
                            }),
                                (t.onerror = function (t) {
                                    null != e.onError_ && e.onError_(event.target.error);
                                }),
                                (t.onsuccess = function () {
                                    e.deleteMetaData()
                                        .then(function () {
                                            e.onSuccess_(), (e.dbStatus.conStatus = h.Closed);
                                        })
                                        .catch(e.onError_);
                                });
                        }, 100);
                    }),
                    t
                );
            })(K),
            M = (function () {
                function e() {}
                return (
                    (e.callDbDroppedByBrowser = function (t) {
                        e.dbStatus.conStatus === h.Connected &&
                            ((e.isDbDeletedByBrowser = !0),
                            !0 === t &&
                                new J(
                                    function () {},
                                    function () {}
                                ).deleteMetaData());
                    }),
                    (e.createTransaction = function (t, n, r) {
                        if (null === e.transaction) {
                            (r = r || a.ReadWrite), (e.transaction = e.dbConnection.transaction(t, r));
                            var o = function () {
                                (e.transaction = null), n();
                            };
                            (e.transaction.oncomplete = o), (e.transaction.onabort = o);
                        }
                    }),
                    (e.setDbList = function (e) {
                        return B.set("DataBase_List", e);
                    }),
                    (e.updateDbStatus = function (t, n) {
                        void 0 === n ? (e.dbStatus.conStatus = t) : (e.dbStatus = { conStatus: t, lastError: n });
                    }),
                    (e.getDbList = function () {
                        return P(function (e, t) {
                            B.get("DataBase_List")
                                .then(function (t) {
                                    e(null == t ? [] : t);
                                })
                                .catch(t);
                        });
                    }),
                    (e.getDbVersion = function (e) {
                        return P(function (t, n) {
                            B.get("JsStore_" + e + "_Db_Version")
                                .then(function (e) {
                                    t(Number(e));
                                })
                                .catch(n);
                        });
                    }),
                    (e.getDbSchema = function (e) {
                        return B.get("JsStore_" + e + "_Schema");
                    }),
                    (e.getTable = function (t) {
                        return e.activeDb.tables.find(function (e) {
                            return e.name === t;
                        });
                    }),
                    (e.transaction = null),
                    (e.activeDbVersion = 0),
                    (e.dbStatus = { conStatus: h.NotStarted }),
                    e
                );
            })(),
            U = function (e) {
                if (null == e) return !0;
                switch (typeof e) {
                    case "string":
                        return 0 === e.length;
                    case "number":
                        return isNaN(e);
                }
                return !1;
            },
            z = function (e) {
                if (null == e) return i.Null;
                var t = typeof e;
                switch (t) {
                    case "object":
                        if (Array.isArray(e)) return i.Array;
                        if (e instanceof Date) return i.DateTime;
                }
                return t;
            },
            $ = (function () {
                function e(e) {
                    this.table = e;
                }
                return (
                    (e.prototype.check = function (e, t) {
                        var n = this,
                            o = null;
                        return (
                            typeof e === i.Object
                                ? this.table
                                    ? this.table.columns.every(function (t) {
                                          return null === o && (t.name in e && (o = n.checkByColumn_(t, e[t.name])), !0);
                                      })
                                    : (o = new W(r.TableNotExist, { tableName: t }))
                                : (o = new W(r.NotObject)),
                            null != o ? o.get() : null
                        );
                    }),
                    (e.prototype.checkByColumn_ = function (e, t) {
                        var n = null;
                        !0 === e.notNull && U(t) && (n = new W(r.NullValue, { ColumnName: e.name }));
                        var o = z(t),
                            i = null != t;
                        if ((e.dataType && i && o !== e.dataType && "object" !== o && (n = new W(r.WrongDataType, { column: e.name })), i && "object" === o)) {
                            var u = ["+", "-", "*", "/", "{push}"];
                            for (var c in t) {
                                u.indexOf(c) < 0 && e.dataType && o !== e.dataType && (n = new W(r.WrongDataType, { column: e.name }));
                                break;
                            }
                        }
                        return n;
                    }),
                    e
                );
            })(),
            H = (function () {
                function e(e, t) {
                    (this.errorOccured = !1), (this.autoIncrementValue = {}), (this.table = e), (this.autoIncrementValue = t);
                }
                return (
                    (e.prototype.checkAndModifyValue = function (e) {
                        var t = this;
                        return (
                            (this.value = e),
                            this.table.columns.every(function (e) {
                                return t.checkAndModifyColumnValue_(e), !t.errorOccured;
                            }),
                            this.errorOccured
                        );
                    }),
                    (e.prototype.checkNotNullAndDataType_ = function (e) {
                        e.notNull && U(this.value[e.name])
                            ? this.onValidationError_(r.NullValue, { ColumnName: e.name })
                            : e.dataType && !U(this.value[e.name]) && z(this.value[e.name]) !== e.dataType && this.onValidationError_(r.WrongDataType, { column: e.name });
                    }),
                    (e.prototype.checkAndModifyColumnValue_ = function (e) {
                        var t = this.value[e.name];
                        e.autoIncrement
                            ? U(t)
                                ? (this.value[e.name] = ++this.autoIncrementValue[e.name])
                                : z(t) === i.Number && t > this.autoIncrementValue[e.name] && (this.autoIncrementValue[e.name] = t)
                            : void 0 !== e.default && U(t) && (this.value[e.name] = e.default),
                            this.checkNotNullAndDataType_(e);
                    }),
                    (e.prototype.onValidationError_ = function (e, t) {
                        (this.errorOccured = !0), (this.log = new W(e, t));
                    }),
                    e
                );
            })(),
            X = function (e) {
                return Promise.all(e);
            },
            Y = function (e) {
                var t = e.columns.filter(function (e) {
                    return e.autoIncrement;
                });
                return P(function (n, r) {
                    X(
                        t.map(function (t) {
                            var n = "JsStore_" + M.activeDb.name + "_" + e.name + "_" + t.name + "_Value";
                            return B.get(n);
                        })
                    )
                        .then(function (e) {
                            for (var r = {}, o = 0; o < t.length; o++) r[t[o].name] = e[o];
                            n(r);
                        })
                        .catch(r);
                });
            },
            Z = (function () {
                function e(e, t) {
                    (this.table = e), (this.values = t);
                }
                return (
                    (e.prototype.checkAndModifyValues = function () {
                        var e = this;
                        return P(function (t, n) {
                            var r = function (r) {
                                (e.valueCheckerObj = new H(e.table, r)), e.startChecking().then(t).catch(n);
                            };
                            !1 === Ft.isTransactionQuery
                                ? Y(e.table)
                                      .then(function (e) {
                                          r(e);
                                      })
                                      .catch(n)
                                : r(ee.autoIncrementValues[e.table.name]);
                        });
                    }),
                    (e.prototype.startChecking = function () {
                        var e = this;
                        return P(function (t, n) {
                            var r = !1;
                            (e.values.every(function (t) {
                                return !(r = e.valueCheckerObj.checkAndModifyValue(t));
                            }),
                            r) && n(e.valueCheckerObj.log.get());
                            var o,
                                i,
                                u,
                                c =
                                    ((o = e.table),
                                    (i = e.valueCheckerObj.autoIncrementValue),
                                    (u = Object.keys(i)),
                                    X(
                                        u.map(function (e) {
                                            var t = "JsStore_" + M.activeDb.name + "_" + o.name + "_" + e + "_Value",
                                                n = i[e];
                                            return !0 === Ft.isTransactionQuery && (ee.autoIncrementValues[o.name][e] = n), B.set(t, n);
                                        })
                                    ));
                            !1 === Ft.isTransactionQuery ? c.then(t).catch(n) : t();
                        });
                    }),
                    e
                );
            })(),
            ee = (function () {
                function e(e, t) {
                    (this.isTransaction = !1), (this.api = e), (this.query = t);
                }
                return (
                    (e.prototype.checkAndModify = function () {
                        var e = this;
                        return P(function (t, n) {
                            var r = function () {
                                null == e.error ? t() : n(e.error);
                            };
                            switch (e.api) {
                                case u.Select:
                                case u.Remove:
                                case u.Count:
                                    e.checkFetchQuery_(), r();
                                    break;
                                case u.Insert:
                                    e.checkInsertQuery_()
                                        .then(r)
                                        .catch(function (t) {
                                            (e.error = t), r();
                                        });
                                    break;
                                case u.Update:
                                    e.checkUpdateQuery_(), r();
                            }
                        });
                    }),
                    (e.prototype.isInsertQryValid_ = function (e) {
                        var t,
                            n = this.getTable_(this.query.into);
                        if (n)
                            switch (z(this.query.values)) {
                                case i.Array:
                                    break;
                                case i.Null:
                                    t = new W(r.NoValueSupplied);
                                    break;
                                default:
                                    t = new W(r.NotArray);
                            }
                        else t = new W(r.TableNotExist, { tableName: this.query.into });
                        return e(n), null == t ? null : t.get();
                    }),
                    (e.prototype.checkInsertQuery_ = function () {
                        var e = this;
                        return P(function (t, n) {
                            var r,
                                o = e.isInsertQryValid_(function (e) {
                                    r = e;
                                });
                            if (null == o)
                                if (!0 === e.query.skipDataCheck) t();
                                else {
                                    var i = new Z(r, e.query.values);
                                    i.checkAndModifyValues()
                                        .then(function () {
                                            (e.query.values = i.values), t();
                                        })
                                        .catch(n);
                                }
                            else n(o);
                        });
                    }),
                    (e.prototype.checkUpdateQuery_ = function () {
                        (this.error = new $(this.getTable_(this.query.in)).check(this.query.set, this.query.in)),
                            null == this.error && null != this.query.where && (this.checkForNullInWhere_(), null == this.error && this.addGreatAndLessToNotOp_());
                    }),
                    (e.prototype.checkForNullInWhere_ = function () {
                        for (var e in this.query.where) if (null == this.query.where[e]) return void (this.error = new W(r.NullValueInWhere, { column: e }).get());
                    }),
                    (e.prototype.checkFetchQuery_ = function () {
                        !0 === this.isTableExist_(this.query.from)
                            ? null != this.query.where && (this.checkForNullInWhere_(), null == this.error && this.addGreatAndLessToNotOp_())
                            : (this.error = new W(r.TableNotExist, { tableName: this.query.from }).get());
                    }),
                    (e.prototype.isTableExist_ = function (e) {
                        return (
                            this.activeDb_.tables.findIndex(function (t) {
                                return t.name === e;
                            }) >= 0
                        );
                    }),
                    Object.defineProperty(e.prototype, "activeDb_", {
                        get: function () {
                            return M.activeDb;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.getTable_ = function (e) {
                        return M.getTable(e);
                    }),
                    (e.prototype.addGreatAndLessToNotOp_ = function () {
                        var e = this.query.where,
                            t = function (e, t) {
                                return (
                                    t.findIndex(function (t) {
                                        return null != e[t][s.NotEqualTo];
                                    }) >= 0
                                );
                            },
                            n = function (e, t) {
                                var n;
                                return (
                                    t.forEach(function (t) {
                                        null != (n = e[t])[s.NotEqualTo] &&
                                            ((e[t][s.GreaterThan] = n[s.NotEqualTo]),
                                            void 0 === e[s.Or] ? ((e[s.Or] = {}), (e[s.Or][t] = {})) : void 0 === e[s.Or][t] && (e[s.Or][t] = {}),
                                            (e[s.Or][t][s.LessThan] = n[s.NotEqualTo]),
                                            delete e[t][s.NotEqualTo]);
                                    }),
                                    e
                                );
                            };
                        switch (z(e)) {
                            case i.Object:
                                var r = Object.keys(e);
                                if (t(e, r))
                                    if (1 === r.length) this.query.where = n(e, r);
                                    else {
                                        var o = [];
                                        r.forEach(function (t) {
                                            var r;
                                            o.push(n((((r = {})[t] = e[t]), r), [t]));
                                        }),
                                            (this.query.where = o);
                                    }
                                break;
                            default:
                                var u = [];
                                e.forEach(function (e) {
                                    var r = Object.keys(e);
                                    t(e, r) && (e = n(e, r)), u.push(e);
                                }),
                                    (this.query.where = u);
                        }
                    }),
                    (e.autoIncrementValues = {}),
                    e
                );
            })(),
            te = (function () {
                function e() {}
                return (
                    Object.defineProperty(e.prototype, "activeDb", {
                        get: function () {
                            return M.activeDb;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    Object.defineProperty(e.prototype, "dbConnection", {
                        get: function () {
                            return M.dbConnection;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    Object.defineProperty(e.prototype, "transaction", {
                        get: function () {
                            return M.transaction;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.createTransaction = function (e, t, n) {
                        M.createTransaction(e, t, n);
                    }),
                    (e.prototype.regexTest = function (e) {
                        return this.regexExpression.test(e);
                    }),
                    (e.prototype.isTableExist = function (e) {
                        return (
                            this.activeDb.tables.findIndex(function (t) {
                                return t.name === e;
                            }) >= 0
                        );
                    }),
                    (e.prototype.getTable = function (e) {
                        return M.getTable(e);
                    }),
                    (e.prototype.getKeyRange = function (e, t) {
                        var n;
                        switch (t) {
                            case s.Between:
                                n = IDBKeyRange.bound(e.low, e.high, !1, !1);
                                break;
                            case s.GreaterThan:
                                n = IDBKeyRange.lowerBound(e, !0);
                                break;
                            case s.GreaterThanEqualTo:
                                n = IDBKeyRange.lowerBound(e);
                                break;
                            case s.LessThan:
                                n = IDBKeyRange.upperBound(e, !0);
                                break;
                            case s.LessThanEqualTo:
                                n = IDBKeyRange.upperBound(e);
                                break;
                            default:
                                n = IDBKeyRange.only(e);
                        }
                        return n;
                    }),
                    (e.prototype.getPrimaryKey = function (e) {
                        var t = this.getTable(e).primaryKey;
                        return t || this.getKeyPath(e);
                    }),
                    (e.prototype.getKeyPath = function (e) {
                        return this.dbConnection.transaction([e], "readonly").objectStore(e).keyPath;
                    }),
                    e
                );
            })(),
            ne = function (e) {
                return "object" === z(e) && !(e instanceof RegExp);
            },
            re = function (e) {
                if (ne(e)) {
                    var t = {};
                    for (var n in e) t[n] = null != e[n] && ne(e[n]) ? re(e[n]) : e[n];
                    return t;
                }
                return e;
            },
            oe = function (e, t) {
                var n = z(e);
                if (n !== z(t)) return !1;
                switch (n) {
                    case i.DateTime:
                        return e.getTime() === t.getTime();
                    default:
                        return e === t;
                }
            },
            ie = function (e) {
                var t,
                    n,
                    r = e.split("%");
                switch ((r[1] ? ((t = r[1]), (n = r.length > 2 ? l.Any : l.Last)) : ((t = r[0]), (n = l.First)), n)) {
                    case l.First:
                        return new RegExp("^" + t, "i");
                    case l.Last:
                        return new RegExp(t + "$", "i");
                    default:
                        return new RegExp("" + t, "i");
                }
            },
            ue = (function () {
                function e(e, t) {
                    (this.where = re(e)), (this.checkFlag = t);
                }
                return (
                    (e.prototype.remove = function (e) {
                        var t = e.pop();
                        delete e.reduce(function (e, t) {
                            return e && e[t];
                        }, this.where)[t];
                    }),
                    (e.prototype.check = function (e) {
                        var t = !0;
                        if (!this.checkFlag) return t;
                        for (var n in this.where) {
                            if (!t) return t;
                            var r = this.where[n],
                                o = e[n];
                            if ("object" === z(r))
                                for (var i in r) {
                                    if (!t) return t;
                                    switch (i) {
                                        case s.In:
                                            t = this.checkIn(n, o);
                                            break;
                                        case s.Like:
                                            t = this.checkLike_(n, o);
                                            break;
                                        case s.Regex:
                                            t = this.checkRegex(n, o);
                                            break;
                                        case s.Between:
                                        case s.GreaterThan:
                                        case s.LessThan:
                                        case s.GreaterThanEqualTo:
                                        case s.LessThanEqualTo:
                                        case s.NotEqualTo:
                                            t = this.checkComparisionOp_(n, o, i);
                                            break;
                                        default:
                                            t = !1;
                                    }
                                }
                            else t = oe(r, o);
                        }
                        return t;
                    }),
                    (e.prototype.checkIn = function (e, t) {
                        return (
                            null !=
                            this.where[e][s.In].find(function (e) {
                                return oe(e, t);
                            })
                        );
                    }),
                    (e.prototype.checkLike_ = function (e, t) {
                        return ie(this.where[e][s.Like]).test(t);
                    }),
                    (e.prototype.checkRegex = function (e, t) {
                        return this.where[e][s.Regex].test(t);
                    }),
                    (e.prototype.checkComparisionOp_ = function (e, t, n) {
                        var r = this.where[e][n];
                        switch (n) {
                            case s.GreaterThan:
                                return t > r;
                            case s.LessThan:
                                return t < r;
                            case s.LessThanEqualTo:
                                return t <= r;
                            case s.GreaterThanEqualTo:
                                return t >= r;
                            case s.Between:
                                return t >= r.low && t <= r.high;
                            case s.NotEqualTo:
                                return t !== r;
                        }
                    }),
                    e
                );
            })(),
            ce = function (e) {
                for (var t in e) return t;
            },
            se = function (e) {
                return Object.keys(e);
            },
            ae = function (e) {
                return se(e).length;
            },
            le = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            he = (function (e) {
                function t() {
                    var t = (null !== e && e.apply(this, arguments)) || this;
                    return (t.rowAffected = 0), t;
                }
                return (
                    le(t, e),
                    (t.prototype.onErrorOccured = function (e, t) {
                        if ((void 0 === t && (t = !1), t)) e.logError(), (this.error = e.get());
                        else {
                            var n = void 0;
                            e.name ? ((n = new W(e.name)).message = e.message) : ((n = new W(e.target.error.name)).message = e.target.error.message), (this.error = n.get());
                        }
                    }),
                    (t.prototype.onExceptionOccured = function (e) {
                        console.error(e), this.onError({ message: e.message, type: r.InvalidQuery });
                    }),
                    (t.prototype.getColumnInfo = function (e, t) {
                        return this.getTable(t).columns.find(function (t) {
                            return t.name === e;
                        });
                    }),
                    (t.prototype.goToWhereLogic = function () {
                        var e = ce(this.query.where);
                        if (this.objectStore.indexNames.contains(e)) {
                            var t = this.query.where[e];
                            if ("object" === z(t)) {
                                var n = ae(t) > 1 || ae(this.query.where) > 1;
                                this.whereCheckerInstance = new ue(this.query.where, n);
                                var o = ce(t);
                                switch ((this.whereCheckerInstance.remove([e, o]), o)) {
                                    case s.Like:
                                        var i = ie(t[s.Like]);
                                        this.executeRegexLogic(e, i);
                                        break;
                                    case s.Regex:
                                        this.executeRegexLogic(e, t[s.Regex]);
                                        break;
                                    case s.In:
                                        this.executeInLogic(e, t[s.In]);
                                        break;
                                    case s.Between:
                                    case s.GreaterThan:
                                    case s.LessThan:
                                    case s.GreaterThanEqualTo:
                                    case s.LessThanEqualTo:
                                        this.executeWhereLogic(e, t, o, "next");
                                        break;
                                    case s.Aggregate:
                                        break;
                                    default:
                                        this.executeWhereLogic(e, t, null, "next");
                                }
                            } else {
                                n = ae(this.query.where) > 1;
                                (this.whereCheckerInstance = new ue(this.query.where, n)), this.whereCheckerInstance.remove([e]), this.executeWhereLogic(e, t, null, "next");
                            }
                        } else {
                            var u = this.getColumnInfo(e, this.tableName),
                                c = new W(null == u ? r.ColumnNotExist : r.EnableSearchOff, { column: e });
                            this.onErrorOccured(c, !0);
                        }
                    }),
                    t
                );
            })(te),
            fe = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            pe = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (o.query = t), (o.onSuccess = n), (o.onError = r), o;
                }
                return (
                    fe(t, e),
                    (t.prototype.execute = function () {
                        var e = this;
                        this.createTransaction([this.query], function () {
                            null == e.error ? e.onSuccess() : e.onError(e.error);
                        });
                        var t = this.transaction.objectStore(this.query).clear();
                        (t.onsuccess = function (t) {
                            e.getTable(e.query).columns.forEach(function (t) {
                                t.autoIncrement && B.set("JsStore_" + e.activeDb.name + "_" + e.query + "_" + t.name + "_Value", 0);
                            });
                        }),
                            (t.onerror = this.onErrorOccured);
                    }),
                    t
                );
            })(he),
            ye = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            de = (function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return (r.onSuccess = t), (r.onError = n), r;
                }
                return (
                    ye(t, e),
                    (t.prototype.execute = function (e) {
                        var t = this,
                            n = [],
                            r = indexedDB.open(this.dbName, this.dbVersion),
                            o = !1;
                        (r.onerror = function (e) {
                            null != t.onError && t.onError(e.target.error);
                        }),
                            (r.onsuccess = function (e) {
                                (t.dbStatus.conStatus = h.Connected),
                                    (t.dbConnection = r.result),
                                    (t.dbConnection.onclose = t.onDbClose.bind(t)),
                                    (t.dbConnection.onversionchange = t.onDbVersionChange.bind(t)),
                                    (t.dbConnection.onerror = t.onDbConError.bind(t)),
                                    o
                                        ? t.savedbNameIntoDbList_().then(function () {
                                              null != t.onSuccess && t.onSuccess(o);
                                          })
                                        : (t.setPrimaryKey_(), t.onSuccess(o));
                            }),
                            (r.onupgradeneeded = function (r) {
                                o = !0;
                                var i = r.target.result,
                                    u = function (e, r) {
                                        try {
                                            var o;
                                            e.primaryKey.length > 0
                                                ? ((t.activeDb.tables[r].primaryKey = e.primaryKey), (o = i.createObjectStore(e.name, { keyPath: e.primaryKey })))
                                                : (o = i.createObjectStore(e.name, { autoIncrement: !0 })),
                                                e.columns.forEach(function (n) {
                                                    if (!0 === n.enableSearch) {
                                                        var r = n.primaryKey ? { unique: !0 } : { unique: n.unique };
                                                        r.multiEntry = n.multiEntry;
                                                        var i = null == n.keyPath ? n.name : n.keyPath;
                                                        o.createIndex(n.name, i, r), n.autoIncrement && B.set("JsStore_" + t.dbName + "_" + e.name + "_" + n.name + "_Value", 0);
                                                    }
                                                }),
                                                n.push(e.name),
                                                B.set("JsStore_" + t.dbName + "_" + e.name + "_Version", e.version);
                                        } catch (e) {
                                            console.error(e);
                                        }
                                    };
                                e.forEach(function (e, t) {
                                    e.requireDelete ? (i.objectStoreNames.contains(e.name) && i.deleteObjectStore(e.name), u(e, t)) : e.requireCreation && u(e, t);
                                });
                            });
                    }),
                    (t.prototype.savedbNameIntoDbList_ = function () {
                        var e = this;
                        return P(function (t, n) {
                            e.getDbList()
                                .then(function (r) {
                                    r.indexOf(e.dbName) < 0 ? (r.push(e.dbName), e.setDbList(r).then(t).catch(n)) : t();
                                })
                                .catch(n);
                        });
                    }),
                    (t.prototype.setPrimaryKey_ = function () {
                        var e = this;
                        this.activeDb.tables.forEach(function (t, n) {
                            t.columns.every(function (t) {
                                return (e.activeDb.tables[n].primaryKey = t.primaryKey ? t.name : ""), !t.primaryKey;
                            });
                        });
                    }),
                    t
                );
            })(K),
            be = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            _e = (function (e) {
                function t() {
                    var t = (null !== e && e.apply(this, arguments)) || this;
                    return (t.results = []), t;
                }
                return be(t, e), (t.prototype.onQueryFinished = function () {}), t;
            })(he),
            ve = (function () {
                function e() {}
                return (
                    (e.prototype.setCaseAndValue = function (e, t) {
                        (this.caseQuery_ = e), this.setValue(t);
                    }),
                    (e.prototype.setCaseAndColumn = function (e, t) {
                        return (this.caseQuery_ = e), this.setColumn(t), this;
                    }),
                    (e.prototype.setColumn = function (e) {
                        return (this.columnName_ = e), (this.caseColumnQuery_ = this.caseQuery_[this.columnName_]), (this.length_ = this.caseColumnQuery_.length), this;
                    }),
                    (e.prototype.setValue = function (e) {
                        return (this.value = e), this;
                    }),
                    (e.prototype.evaluate = function () {
                        for (var e = 0; e < this.length_; e++) if (!0 === this.checkCase_(this.caseColumnQuery_[e])) return this.caseColumnQuery_[e].then;
                        var t = this.caseColumnQuery_[this.length_ - 1].then;
                        return null == t ? this.value[this.columnName_] : t;
                    }),
                    (e.prototype.checkCase_ = function (e) {
                        var t;
                        for (t in e) {
                            switch (t) {
                                case s.GreaterThan:
                                    if (this.value[this.columnName_] > e[t]) return !0;
                                    break;
                                case s.Equal:
                                    if (this.value[this.columnName_] === e[t]) return !0;
                                    break;
                                case s.LessThan:
                                    if (this.value[this.columnName_] < e[t]) return !0;
                                    break;
                                case s.GreaterThanEqualTo:
                                    if (this.value[this.columnName_] >= e[t]) return !0;
                                    break;
                                case s.LessThanEqualTo:
                                    if (this.value[this.columnName_] <= e[t]) return !0;
                                    break;
                                case s.NotEqualTo:
                                    if (this.value[this.columnName_] !== e[t]) return !0;
                                    break;
                                case s.Between:
                                    if (this.value[this.columnName_] > e[t].low && this.value[this.columnName_] < e[t].high) return !0;
                            }
                            return !1;
                        }
                    }),
                    e
                );
            })(),
            me = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            ge = (function (e) {
                function t() {
                    var t = (null !== e && e.apply(this, arguments)) || this;
                    return (t.sorted = !1), (t.isSubQuery = !1), (t.shouldEvaluateLimitAtEnd = !1), (t.shouldEvaluateSkipAtEnd = !1), (t.thenEvaluator = new ve()), t;
                }
                return (
                    me(t, e),
                    (t.prototype.setPushResult = function () {
                        var e = this;
                        this.query.case
                            ? (this.pushResult = function (t) {
                                  var n;
                                  for (n in (e.thenEvaluator.setCaseAndValue(e.query.case, t), e.query.case)) t[n] = e.thenEvaluator.setColumn(n).evaluate();
                                  e.results.push(t);
                              })
                            : (this.pushResult = function (t) {
                                  e.results.push(t);
                              });
                    }),
                    (t.prototype.removeDuplicates = function () {
                        var e = this.results;
                        this.results = null;
                        for (var t = this.getPrimaryKey(this.query.from), n = {}, r = 0, o = e.length; r < o; r++) n[e[r][t]] = e[r];
                        for (var r in ((e = []), n)) e.push(n[r]);
                        this.results = e;
                    }),
                    t
                );
            })(_e),
            Oe = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Se = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Oe(t, e),
                    (t.prototype.executeWhereUndefinedLogic = function () {
                        if (this.query.order && !1 !== this.query.order.idbSorting && this.query.order.by) {
                            if (!this.objectStore.indexNames.contains(this.query.order.by)) {
                                var e = new W(r.ColumnNotExist, { column: this.query.order.by, isOrder: !0 });
                                return void this.onErrorOccured(e, !0);
                            }
                            var t = this.query.order.type && "desc" === this.query.order.type.toLowerCase() ? "prev" : "next";
                            (this.sorted = !0), (y = this.objectStore.index(this.query.order.by).openCursor(null, t));
                        } else y = this.objectStore.openCursor();
                        (y.onerror = this.onErrorOccured),
                            !1 === this.shouldEvaluateLimitAtEnd && !1 === this.shouldEvaluateSkipAtEnd
                                ? this.skipRecord && this.limitRecord
                                    ? this.executeSkipAndLimitForNoWhere_()
                                    : this.skipRecord
                                    ? this.executeSkipForNoWhere_()
                                    : this.limitRecord
                                    ? this.executeLimitForNotWhere_()
                                    : this.executeSimpleForNotWhere_()
                                : this.executeSimpleForNotWhere_();
                    }),
                    (t.prototype.executeSkipAndLimitForNoWhere_ = function () {
                        var e,
                            t = this,
                            n = !1;
                        y.onsuccess = function (r) {
                            (e = r.target.result) ? (n && t.results.length !== t.limitRecord ? (t.pushResult(e.value), e.continue()) : ((n = !0), e.advance(t.skipRecord))) : t.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeSkipForNoWhere_ = function () {
                        var e,
                            t = this,
                            n = !1;
                        y.onsuccess = function (r) {
                            (e = r.target.result) ? (n ? (t.pushResult(e.value), e.continue()) : ((n = !0), e.advance(t.skipRecord))) : t.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeSimpleForNotWhere_ = function () {
                        var e,
                            t = this;
                        y.onsuccess = function (n) {
                            (e = n.target.result) ? (t.pushResult(e.value), e.continue()) : t.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeLimitForNotWhere_ = function () {
                        var e,
                            t = this;
                        y.onsuccess = function (n) {
                            (e = n.target.result) && t.results.length !== t.limitRecord ? (t.pushResult(e.value), e.continue()) : t.onQueryFinished();
                        };
                    }),
                    t
                );
            })(ge),
            we = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            xe = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    we(t, e),
                    (t.prototype.executeInLogic = function (e, t) {
                        var n = this;
                        (_ = this.skipRecord),
                            (b = function (e) {
                                0 === _ ? n.pushResult(e) : --_;
                            }),
                            (d = function () {
                                return n.whereCheckerInstance.check(v.value);
                            }),
                            !1 === this.shouldEvaluateLimitAtEnd && !1 === this.shouldEvaluateSkipAtEnd
                                ? this.skipRecord && this.limitRecord
                                    ? this.executeSkipAndLimitForIn_(e, t)
                                    : this.skipRecord
                                    ? this.executeSkipForIn_(e, t)
                                    : this.limitRecord
                                    ? this.executeLimitForIn_(e, t)
                                    : this.executeSimpleForIn_(e, t)
                                : this.executeSimpleForIn_(e, t);
                    }),
                    (t.prototype.executeSkipAndLimitForIn_ = function (e, t) {
                        var n,
                            r = this,
                            o = this.objectStore.index(e);
                        X(
                            t.map(function (e) {
                                return (
                                    (t = e),
                                    P(function (e, i) {
                                        ((n = o.openCursor(r.getKeyRange(t))).onsuccess = function (t) {
                                            (v = t.target.result), r.results.length !== r.limitRecord && v ? (d() && b(v.value), v.continue()) : e();
                                        }),
                                            (n.onerror = i);
                                    })
                                );
                                var t;
                            })
                        )
                            .then(function () {
                                r.onQueryFinished();
                            })
                            .catch(function (e) {
                                r.onErrorOccured(e);
                            });
                    }),
                    (t.prototype.executeSkipForIn_ = function (e, t) {
                        var n,
                            r = this,
                            o = this.objectStore.index(e);
                        X(
                            t.map(function (e) {
                                return (
                                    (t = e),
                                    P(function (e, i) {
                                        ((n = o.openCursor(r.getKeyRange(t))).onsuccess = function (t) {
                                            (v = t.target.result) ? (d() && b(v.value), v.continue()) : e();
                                        }),
                                            (n.onerror = i);
                                    })
                                );
                                var t;
                            })
                        )
                            .then(function () {
                                r.onQueryFinished();
                            })
                            .catch(function (e) {
                                r.onErrorOccured(e);
                            });
                    }),
                    (t.prototype.executeLimitForIn_ = function (e, t) {
                        var n,
                            r = this,
                            o = this.objectStore.index(e);
                        X(
                            t.map(function (e) {
                                return (
                                    (t = e),
                                    P(function (e, i) {
                                        ((n = o.openCursor(r.getKeyRange(t))).onsuccess = function (t) {
                                            (v = t.target.result) && r.results.length !== r.limitRecord ? (d() && r.pushResult(v.value), v.continue()) : e();
                                        }),
                                            (n.onerror = i);
                                    })
                                );
                                var t;
                            })
                        )
                            .then(function () {
                                r.onQueryFinished();
                            })
                            .catch(function (e) {
                                r.onErrorOccured(e);
                            });
                    }),
                    (t.prototype.executeSimpleForIn_ = function (e, t) {
                        var n,
                            r = this,
                            o = this.objectStore.index(e);
                        X(
                            t.map(function (e) {
                                return (
                                    (t = e),
                                    P(function (e, i) {
                                        ((n = o.openCursor(r.getKeyRange(t))).onsuccess = function (t) {
                                            (v = t.target.result) ? (d() && r.pushResult(v.value), v.continue()) : e();
                                        }),
                                            (n.onerror = i);
                                    })
                                );
                                var t;
                            })
                        )
                            .then(function () {
                                r.onQueryFinished();
                            })
                            .catch(function (e) {
                                r.onErrorOccured(e);
                            });
                    }),
                    t
                );
            })(Se),
            ke = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Ee = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    ke(t, e),
                    (t.prototype.executeRegexLogic = function (e, t) {
                        var n = this;
                        (O = this.skipRecord),
                            (this.regexExpression = t),
                            (g = function (e) {
                                0 === O ? n.pushResult(e) : --O;
                            }),
                            (m = function () {
                                return n.regexTest(S.key) && n.whereCheckerInstance.check(S.value);
                            }),
                            ((w = this.objectStore.index(e).openCursor()).onerror = this.onErrorOccured),
                            !1 === this.shouldEvaluateLimitAtEnd && !1 === this.shouldEvaluateSkipAtEnd
                                ? this.skipRecord && this.limitRecord
                                    ? this.executeSkipAndLimitForRegex_()
                                    : this.skipRecord
                                    ? this.executeSkipForRegex_()
                                    : this.limitRecord
                                    ? this.executeLimitForRegex_()
                                    : this.executeSimpleForRegex_()
                                : this.executeSimpleForRegex_();
                    }),
                    (t.prototype.executeSkipAndLimitForRegex_ = function () {
                        var e = this;
                        w.onsuccess = function (t) {
                            (S = t.target.result), e.results.length !== e.limitRecord && S ? (m() && g(S.value), S.continue()) : e.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeSkipForRegex_ = function () {
                        var e = this;
                        w.onsuccess = function (t) {
                            (S = t.target.result) ? (m() && g(S.value), S.continue()) : e.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeLimitForRegex_ = function () {
                        var e = this;
                        w.onsuccess = function (t) {
                            (S = t.target.result), e.results.length !== e.limitRecord && S ? (m() && e.pushResult(S.value), S.continue()) : e.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeSimpleForRegex_ = function () {
                        var e = this;
                        w.onsuccess = function (t) {
                            (S = t.target.result) ? (m() && e.pushResult(S.value), S.continue()) : e.onQueryFinished();
                        };
                    }),
                    t
                );
            })(xe),
            De = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            qe = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    De(t, e),
                    (t.prototype.executeWhereLogic = function (e, t, n, r) {
                        var o = this;
                        (x = function () {
                            return o.whereCheckerInstance.check(k.value);
                        }),
                            (t = n ? t[n] : t),
                            ((E = this.objectStore.index(e).openCursor(this.getKeyRange(t, n), r)).onerror = this.onErrorOccured),
                            !1 === this.shouldEvaluateLimitAtEnd && !1 === this.shouldEvaluateSkipAtEnd
                                ? this.skipRecord && this.limitRecord
                                    ? this.executeSkipAndLimitForWhere_()
                                    : this.skipRecord
                                    ? this.executeSkipForWhere_()
                                    : this.limitRecord
                                    ? this.executeLimitForWhere_()
                                    : this.executeSimpleForWhere_()
                                : this.executeSimpleForWhere_();
                    }),
                    (t.prototype.executeSkipAndLimitForWhere_ = function () {
                        var e = this,
                            t = !1;
                        E.onsuccess = function (n) {
                            (k = n.target.result)
                                ? t && e.results.length !== e.limitRecord
                                    ? (x() && e.pushResult(k.value), k.continue())
                                    : ((t = !0), k.advance(e.skipRecord))
                                : e.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeSkipForWhere_ = function () {
                        var e = this,
                            t = !1;
                        E.onsuccess = function (n) {
                            (k = n.target.result) ? (t ? (x() && e.pushResult(k.value), k.continue()) : ((t = !0), k.advance(e.skipRecord))) : e.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeLimitForWhere_ = function () {
                        var e = this;
                        E.onsuccess = function (t) {
                            (k = t.target.result) && e.results.length !== e.limitRecord ? (x() && e.pushResult(k.value), k.continue()) : e.onQueryFinished();
                        };
                    }),
                    (t.prototype.executeSimpleForWhere_ = function () {
                        var e = this;
                        E.onsuccess = function (t) {
                            (k = t.target.result) ? (x() && e.pushResult(k.value), k.continue()) : e.onQueryFinished();
                        };
                    }),
                    t
                );
            })(Ee),
            Ce = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Te = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Ce(t, e),
                    (t.prototype.processGroupBy = function () {
                        var e = this.query.groupBy,
                            t = this.results,
                            n = {};
                        if (((this.results = this.query.groupBy = null), z(e) !== i.Object))
                            if (z(e) === i.String) for (var r in t) n[t[r][e]] = t[r];
                            else {
                                var o = void 0;
                                for (var r in t) {
                                    for (var u in ((o = ""), e)) o += t[r][e[u]];
                                    n[o] = t[r];
                                }
                            }
                        else if (1 === Object.keys(e).length) {
                            var c = ce(e);
                            for (var r in (this.thenEvaluator.setCaseAndColumn(e, c), t)) n[this.thenEvaluator.setValue(t[r]).evaluate()] = t[r];
                        } else {
                            o = void 0;
                            for (var r in t) {
                                for (var u in ((o = ""), this.thenEvaluator.setCaseAndValue(e, t[r]), e)) o += this.thenEvaluator.setColumn(u).evaluate();
                                n[o] = t[r];
                            }
                        }
                        for (var r in ((t = []), n)) t.push(n[r]);
                        this.results = t;
                    }),
                    (t.prototype.executeAggregateGroupBy = function () {
                        var e = this.query.groupBy,
                            t = this.results;
                        this.results = void 0;
                        var n,
                            r,
                            o,
                            u,
                            c = {},
                            a = this.query.aggregate,
                            l = function () {
                                var e = function () {
                                        return (o = (o = c[r]) ? o["count(" + u + ")"] : 0), (o += t[n][u] ? 1 : 0);
                                    },
                                    l = function () {
                                        return (o = (o = c[r]) ? o["max(" + u + ")"] : 0), (t[n][u] = t[n][u] ? t[n][u] : 0), o > t[n][u] ? o : t[n][u];
                                    },
                                    h = function () {
                                        return (o = (o = c[r]) ? o["min(" + u + ")"] : 1 / 0), (t[n][u] = t[n][u] ? t[n][u] : 1 / 0), o < t[n][u] ? o : t[n][u];
                                    },
                                    f = function () {
                                        return (o = (o = c[r]) ? o["sum(" + u + ")"] : 0), (o += t[n][u] ? t[n][u] : 0);
                                    },
                                    p = function () {
                                        var e = (o = c[r]) ? o["sum(" + u + ")"] : 0;
                                        (e += t[n][u] ? t[n][u] : 0), (t[n]["sum(" + u + ")"] = e), (o = o ? o["count(" + u + ")"] : 0), (o += t[n][u] ? 1 : 0), (t[n]["count(" + u + ")"] = o);
                                    };
                                for (var y in a) {
                                    var d = a[y],
                                        b = z(d),
                                        _ = void 0;
                                    switch (y) {
                                        case s.Count:
                                            _ = e;
                                            break;
                                        case s.Max:
                                            _ = l;
                                            break;
                                        case s.Min:
                                            _ = h;
                                            break;
                                        case s.Sum:
                                            _ = f;
                                            break;
                                        case s.Avg:
                                            _ = p;
                                    }
                                    switch (b) {
                                        case i.String:
                                            (u = d), (t[n][y + "(" + u + ")"] = _());
                                            break;
                                        case i.Array:
                                            for (var v in d) (u = d[v]), (t[n][y + "(" + u + ")"] = _());
                                    }
                                }
                            };
                        if (z(e) === i.String) for (n in t) (r = t[n][e]), l(), (c[r] = t[n]);
                        else
                            for (n in t) {
                                for (var h in ((r = ""), e)) r += t[n][e[h]];
                                l(), (c[r] = t[n]);
                            }
                        for (var f in ((t = []), c)) t.push(c[f]);
                        if (a.avg)
                            if (z(a.avg) === i.String)
                                for (n in t) {
                                    var p = t[n]["sum(" + a.avg + ")"],
                                        y = t[n]["count(" + a.avg + ")"];
                                    (t[n]["avg(" + a.avg + ")"] = p / y), a.count !== a.avg && delete t[n]["count(" + a.avg + ")"], a.sum !== a.avg && delete t[n]["sum(" + a.avg + ")"];
                                }
                            else {
                                var d = z(a.count) === i.String,
                                    b = z(a.sum) === i.String;
                                for (n in t)
                                    for (var h in a.avg) {
                                        var _ = a.avg[h],
                                            v = t[n]["sum(" + _ + ")"],
                                            m = t[n]["count(" + _ + ")"];
                                        (t[n]["avg(" + _ + ")"] = v / m),
                                            d && (a.count !== _ || -1 === a.count.indexOf(_)) && delete t[n]["count(" + _ + ")"],
                                            b && (a.sum !== _ || -1 === a.sum.indexOf(_)) && delete t[n]["sum(" + _ + ")"];
                                    }
                            }
                        this.results = t;
                    }),
                    t
                );
            })(qe),
            je = function (e) {
                return e.replace(/\s/g, "");
            },
            Ie = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Ae = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Ie(t, e),
                    (t.prototype.processGroupDistinctAggr = function () {
                        if (this.query.distinct) {
                            var e = [],
                                t = this.results[0];
                            for (var n in t) e.push(n);
                            var r = this.getPrimaryKey(this.query.from),
                                o = e.indexOf(r);
                            e.splice(o, 1), (this.query.groupBy = e.length > 0 ? e : null);
                        }
                        this.query.groupBy ? (this.query.aggregate ? this.executeAggregateGroupBy() : this.processGroupBy()) : this.query.aggregate && this.processAggregateQry();
                    }),
                    (t.prototype.getOrderColumnInfo_ = function (e) {
                        var t;
                        if (null == this.query.join) t = this.getColumnInfo(e, this.query.from);
                        else {
                            var n = je(e).split(".");
                            (e = n[1]), (t = this.getColumnInfo(e, n[0]));
                        }
                        if (null == t) {
                            var o = this.results[0][e];
                            if (o) return { dataType: z(o), name: e };
                            this.onErrorOccured(new W(r.ColumnNotExist, { column: e, isOrder: !0 }), !0);
                        }
                        return t;
                    }),
                    (t.prototype.compareStringInDesc_ = function (e, t) {
                        return t.localeCompare(e);
                    }),
                    (t.prototype.compareStringinAsc_ = function (e, t) {
                        return e.localeCompare(t);
                    }),
                    (t.prototype.compareDefaultInDesc_ = function (e, t) {
                        return new String(t).localeCompare(e);
                    }),
                    (t.prototype.compareDefaultinAsc_ = function (e, t) {
                        return new String(e).localeCompare(t);
                    }),
                    (t.prototype.compareNumberInDesc_ = function (e, t) {
                        return t - e;
                    }),
                    (t.prototype.compareNumberinAsc_ = function (e, t) {
                        return e - t;
                    }),
                    (t.prototype.compareDateInDesc_ = function (e, t) {
                        return t.getTime() - e.getTime();
                    }),
                    (t.prototype.compareDateInAsc_ = function (e, t) {
                        return e.getTime() - t.getTime();
                    }),
                    (t.prototype.getValInDesc_ = function (e, t, n) {
                        for (var r in n) {
                            this.thenEvaluator.setCaseAndValue(n, e);
                            var o = this.thenEvaluator.setColumn(r).evaluate();
                            this.thenEvaluator.setCaseAndValue(n, t);
                            var u = this.thenEvaluator.setColumn(r).evaluate();
                            switch (typeof e[o]) {
                                case i.String:
                                    return this.compareStringInDesc_(e[o], t[u]);
                                default:
                                    return this.compareNumberInDesc_(e[o], t[u]);
                            }
                        }
                    }),
                    (t.prototype.getValInAsc_ = function (e, t, n) {
                        for (var r in n) {
                            this.thenEvaluator.setCaseAndValue(n, e);
                            var o = this.thenEvaluator.setColumn(r).evaluate();
                            this.thenEvaluator.setCaseAndValue(n, t);
                            var u = this.thenEvaluator.setColumn(r).evaluate();
                            switch (typeof e[o]) {
                                case i.String:
                                    return this.compareStringinAsc_(e[o], t[u]);
                                default:
                                    return this.compareNumberinAsc_(e[o], t[u]);
                            }
                        }
                    }),
                    (t.prototype.getValueComparer_ = function (e, t) {
                        switch (e.dataType) {
                            case i.String:
                                return "asc" === t.type ? this.compareStringinAsc_ : this.compareStringInDesc_;
                            case i.Number:
                                return "asc" === t.type ? this.compareNumberinAsc_ : this.compareNumberInDesc_;
                            case i.DateTime:
                                return "asc" === t.type ? this.compareDateInAsc_ : this.compareDateInDesc_;
                            default:
                                return "asc" === t.type ? this.compareDefaultinAsc_ : this.compareDefaultInDesc_;
                        }
                    }),
                    (t.prototype.orderBy_ = function (e) {
                        var t,
                            n = this;
                        e.type = this.getOrderType_(e.type);
                        var r = e.by;
                        if (null != r && typeof r === i.Object)
                            "asc" === e.type
                                ? this.results.sort(function (e, t) {
                                      return n.getValInAsc_(e, t, r);
                                  })
                                : this.results.sort(function (e, t) {
                                      return n.getValInDesc_(e, t, r);
                                  });
                        else {
                            var o = this.getOrderColumnInfo_(r);
                            if (null != o) {
                                var u = this.getValueComparer_(o, e);
                                (r = o.name),
                                    null == e.case
                                        ? this.results.sort(function (e, t) {
                                              return u(e[r], t[r]);
                                          })
                                        : (this.thenEvaluator.setCaseAndColumn((((t = {})[r] = e.case), t), r),
                                          this.results.sort(function (e, t) {
                                              return u(n.thenEvaluator.setValue(e).evaluate(), n.thenEvaluator.setValue(t).evaluate());
                                          }));
                            }
                        }
                    }),
                    (t.prototype.getOrderType_ = function (e) {
                        return null == e ? "asc" : e.toLowerCase();
                    }),
                    (t.prototype.processOrderBy = function () {
                        var e = this.query.order;
                        if (e && this.results.length > 0 && !this.sorted) {
                            var t = z(e);
                            if (t === i.Object) this.orderBy_(e);
                            else if (t === i.Array) {
                                this.orderBy_(e[0]);
                                for (
                                    var n = function (t, n) {
                                            if (null == r.error) {
                                                var o = e[t - 1].by,
                                                    i = e[t],
                                                    u = i.by,
                                                    c = r.getOrderColumnInfo_(u);
                                                if (null != c) {
                                                    (u = c.name), (i.type = r.getOrderType_(i.type));
                                                    var s = r.getValueComparer_(c, i);
                                                    r.results.sort(function (e, t) {
                                                        return e[o] === t[o] ? s(e[u], t[u]) : 0;
                                                    });
                                                }
                                            }
                                        },
                                        r = this,
                                        o = 1,
                                        u = e.length;
                                    o < u;
                                    o++
                                )
                                    n(o);
                            }
                        }
                    }),
                    (t.prototype.processAggregateQry = function () {
                        var e,
                            t = this.results,
                            n = t.length,
                            r = {};
                        this.results = void 0;
                        var o = function () {
                                var n = 0;
                                for (var r in t) n += t[r][e] ? 1 : 0;
                                return n;
                            },
                            u = function () {
                                var n = 0;
                                for (var r in t) n = n > t[r][e] ? n : t[r][e];
                                return n;
                            },
                            c = function () {
                                var n = 1 / 0,
                                    r = 1 / 0;
                                for (var o in t) n = n < (r = t[o][e] ? t[o][e] : 1 / 0) ? n : r;
                                return n;
                            },
                            s = function () {
                                var n = 0;
                                for (var r in t) n += t[r][e];
                                return n;
                            },
                            a = function () {
                                var r = 0;
                                for (var o in t) r += t[o][e];
                                return r / n;
                            };
                        for (var l in this.query.aggregate) {
                            var h = this.query.aggregate[l],
                                f = z(h),
                                p = void 0;
                            switch (l) {
                                case "count":
                                    p = o;
                                    break;
                                case "max":
                                    p = u;
                                    break;
                                case "min":
                                    p = c;
                                    break;
                                case "sum":
                                    p = s;
                                    break;
                                case "avg":
                                    p = a;
                            }
                            switch (f) {
                                case i.String:
                                    r[l + "(" + (e = h) + ")"] = p();
                                    break;
                                case i.Array:
                                    for (var y in h) r[l + "(" + (e = h[y]) + ")"] = p();
                            }
                        }
                        for (var l in r) t[0][l] = r[l];
                        this.results = [t[0]];
                    }),
                    t
                );
            })(Te),
            Ne = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Qe = function () {
                return (Qe =
                    Object.assign ||
                    function (e) {
                        for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in (t = arguments[n])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                        return e;
                    }).apply(this, arguments);
            },
            Le = (function (e) {
                function t() {
                    var t = (null !== e && e.apply(this, arguments)) || this;
                    return (t.joinQueryStack_ = []), (t.currentQueryStackIndex_ = 0), (t.tablesFetched = []), t;
                }
                return (
                    Ne(t, e),
                    (t.prototype.executeJoinQuery = function () {
                        var e = this,
                            t = this.query;
                        z(t.join) === i.Object ? (this.joinQueryStack_ = [t.join]) : (this.joinQueryStack_ = t.join);
                        var n = t.from;
                        new Ve(
                            { from: n, where: t.where, case: t.case, flatten: t.flatten },
                            function (t) {
                                (e.results = t.map(function (t) {
                                    var n;
                                    return ((n = {})[e.currentQueryStackIndex_] = t), n;
                                })),
                                    e.tablesFetched.push(n),
                                    e.startExecutingJoinLogic_();
                            },
                            this.onError
                        ).execute();
                    }),
                    (t.prototype.onJoinQueryFinished_ = function () {
                        var e = this;
                        if (null == this.error) {
                            if (this.results.length > 0) {
                                this.query[s.Skip] && !this.query[s.Limit] && this.results.splice(0, this.query[s.Skip]);
                                try {
                                    var t = [],
                                        n = Object.keys(this.results[0]).length,
                                        o = function (e, t) {
                                            if (null != e.as) for (var n in e.as) void 0 === t[e.as[n]] && ((t[e.as[n]] = t[n]), delete t[n]);
                                            return t;
                                        };
                                    this.results.forEach(function (r) {
                                        for (var i = r[0], u = 1; u < n; u++) {
                                            var c = e.joinQueryStack_[u - 1];
                                            i = Qe(Qe({}, i), o(c, r[u]));
                                        }
                                        t.push(i);
                                    }),
                                        (this.results = t),
                                        (t = null),
                                        this.processOrderBy(),
                                        this.processGroupDistinctAggr();
                                } catch (e) {
                                    return void this.onError({ message: e.message, type: r.InvalidJoinQuery });
                                }
                                this.query[s.Skip] && this.query[s.Limit]
                                    ? (this.results.splice(0, this.query[s.Skip]), (this.results = this.results.slice(0, this.query[s.Limit])))
                                    : this.query[s.Limit] && (this.results = this.results.slice(0, this.query[s.Limit]));
                            }
                            this.onSuccess(this.results);
                        } else this.onError(this.error);
                    }),
                    (t.prototype.startExecutingJoinLogic_ = function () {
                        var e = this,
                            t = this.joinQueryStack_[this.currentQueryStackIndex_];
                        if (t)
                            try {
                                var n = this.getJoinTableInfo_(t.on);
                                t.with === n.table1.table && (n = { table1: n.table2, table2: n.table1 }),
                                    new Ve(
                                        { from: t.with, where: t.where, case: t.case, flatten: t.flatten },
                                        function (r) {
                                            e.jointables(t.type, n, r), e.tablesFetched.push(n.table2.table), ++e.currentQueryStackIndex_, e.startExecutingJoinLogic_();
                                        },
                                        this.onError
                                    ).execute();
                            } catch (e) {
                                this.onExceptionOccured(e);
                            }
                        else this.onJoinQueryFinished_();
                    }),
                    (t.prototype.jointables = function (e, t, n) {
                        var r,
                            o,
                            i,
                            u,
                            c = this,
                            s = [],
                            a = t.table1.column,
                            l = t.table2.column,
                            h = this.tablesFetched.indexOf(t.table1.table),
                            f = this.currentQueryStackIndex_ + 1;
                        switch (e) {
                            case "left":
                                (i = 0),
                                    (u = {}),
                                    c.getTable(t.table2.table).columns.forEach(function (e) {
                                        u[e.name] = null;
                                    }),
                                    c.results.forEach(function (e) {
                                        (r = []),
                                            (o =
                                                1 === f
                                                    ? function (t) {
                                                          e[h][a] === t[l] && r.push(t);
                                                      }
                                                    : function (t) {
                                                          var n = e[h];
                                                          null != n && n[a] === t[l] && r.push(t);
                                                      }),
                                            n.forEach(o),
                                            0 === r.length && (r = [u]),
                                            r.forEach(function (t) {
                                                (s[i] = Qe({}, e)), (s[i++][f] = t);
                                            });
                                    });
                                break;
                            default:
                                !(function () {
                                    var e = 0;
                                    c.results.forEach(function (t) {
                                        n.forEach(function (n) {
                                            t[h][a] === n[l] && ((s[e] = Qe({}, t)), (s[e++][f] = n));
                                        });
                                    });
                                })();
                        }
                        this.results = s;
                    }),
                    (t.prototype.getJoinTableInfo_ = function (e) {
                        var t = (e = je(e)).split("="),
                            n = t[0].split("."),
                            r = t[1].split(".");
                        return { table1: { table: n[0], column: n[1] }, table2: { table: r[0], column: r[1] } };
                    }),
                    (t.prototype.checkJoinQuery_ = function (e, t) {
                        var n,
                            o = e.table1,
                            i = e.table2,
                            u = this.getTable(o.table),
                            c = this.getTable(i.table);
                        t.with !== i.table && (n = new W(r.InvalidJoinQuery, "on value should contains value of with")),
                            null ==
                            u.columns.find(function (e) {
                                return e.name === o.column;
                            })
                                ? (n = new W(r.InvalidJoinQuery, "column " + o.column + " does not exist in table " + o.table))
                                : null ==
                                      c.columns.find(function (e) {
                                          return e.name === i.column;
                                      }) && (n = new W(r.InvalidJoinQuery, "column " + i.column + " does not exist in table " + i.table)),
                            null == t.as && (t.as = {}),
                            u.columns.every(function (e) {
                                var u = c.columns.find(function (t) {
                                    return t.name === e.name && t.name !== o.column;
                                });
                                return null == u || null != t.as[u.name] || ((n = new W(r.InvalidJoinQuery, "column " + e.name + " exist in both table " + o.table + " & " + i.table)), !1);
                            }),
                            null != n && this.onErrorOccured(n, !0);
                    }),
                    t
                );
            })(Ae),
            Re = function (e) {
                return Array.isArray(e);
            },
            Pe = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Fe = function () {
                return (Fe =
                    Object.assign ||
                    function (e) {
                        for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in (t = arguments[n])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                        return e;
                    }).apply(this, arguments);
            },
            Be = function () {
                for (var e = 0, t = 0, n = arguments.length; t < n; t++) e += arguments[t].length;
                var r = Array(e),
                    o = 0;
                for (t = 0; t < n; t++) for (var i = arguments[t], u = 0, c = i.length; u < c; u++, o++) r[o] = i[u];
                return r;
            },
            Ve = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (
                        (o.onTransactionCompleted_ = function () {
                            if (null == o.error) {
                                if (o.query.flatten) {
                                    var e = [],
                                        t = {};
                                    o.query.flatten.forEach(function (n) {
                                        o.results.forEach(function (r, o) {
                                            r[n].forEach(function (t) {
                                                var o;
                                                e.push(Fe(Fe({}, r), (((o = {})[n] = t), o)));
                                            }),
                                                (t[o] = !0);
                                        });
                                    });
                                    var n = 0;
                                    se(t).forEach(function (e) {
                                        o.results.splice(Number(e) - n, 1), ++n;
                                    }),
                                        (o.results = o.results.concat(e));
                                }
                                o.processGroupDistinctAggr(),
                                    o.processOrderBy(),
                                    o.error
                                        ? o.onError(o.error)
                                        : (o.shouldEvaluateSkipAtEnd && o.results.splice(0, o.query.skip),
                                          o.shouldEvaluateLimitAtEnd && (o.results = o.results.slice(0, o.query.limit)),
                                          o.onSuccess(o.results));
                            } else o.onError(o.error);
                        }),
                        (o.onError = r),
                        (o.onSuccess = n),
                        (o.query = t),
                        (o.tableName = t.from),
                        o.setPushResult(),
                        Re(o.query.where) ? ((o.isArrayQry = !0), o.setLimitAndSkipEvaluationAtEnd_()) : ((o.skipRecord = t.skip), (o.limitRecord = t.limit)),
                        t.order
                            ? ((Re(t.order) || t.order.case || "object" == typeof t.order.by) && (o.query.order.idbSorting = !1), o.setLimitAndSkipEvaluationAtEnd_())
                            : t.groupBy && o.setLimitAndSkipEvaluationAtEnd_(),
                        o
                    );
                }
                return (
                    Pe(t, e),
                    (t.prototype.setLimitAndSkipEvaluationAtEnd_ = function () {
                        this.query.limit && (this.shouldEvaluateLimitAtEnd = !0), this.query.skip && (this.shouldEvaluateSkipAtEnd = !0);
                    }),
                    (t.prototype.execute = function () {
                        var e = new ee(u.Select, this.query);
                        if ((e.checkAndModify(), null == e.error))
                            try {
                                null == this.query.join
                                    ? null != this.query.where
                                        ? (this.initTransaction_(), Re(this.query.where) ? this.processWhereArrayQry() : this.processWhere_())
                                        : (this.initTransaction_(), this.executeWhereUndefinedLogic())
                                    : this.executeJoinQuery();
                            } catch (e) {
                                this.onExceptionOccured(e);
                            }
                        else this.onError(e.error);
                    }),
                    (t.prototype.processWhereArrayQry = function () {
                        var e = this;
                        this.isArrayQry = !0;
                        var t,
                            n = this.query.where,
                            r = this.getPrimaryKey(this.query.from),
                            o = !0,
                            i = [],
                            u = function () {
                                if (t === s.And) {
                                    !0 === o
                                        ? (i = e.results)
                                        : i.length > 0 &&
                                          ((u = []),
                                          e.results.forEach(function (e) {
                                              var t;
                                              (t = e[r]),
                                                  i.findIndex(function (e) {
                                                      return e[r] === t;
                                                  }) >= 0 && u.push(e);
                                          }),
                                          (i = u),
                                          (u = null));
                                } else i.length > 0 ? ((e.results = Be(i, e.results)), e.removeDuplicates(), (i = e.results)) : (i = e.results);
                                var u;
                                (o = !1), n.length > 0 ? ((e.results = []), c()) : ((e.results = i), !0 === e.isSubQuery && e.onTransactionCompleted_());
                            },
                            c = function () {
                                (e.query.where = n.shift()),
                                    e.query.where[s.Or] && 1 === Object.keys(e.query.where).length
                                        ? ((t = s.Or), (e.query.where = e.query.where[s.Or]), (e.onWhereArrayQrySuccess = u))
                                        : ((t = s.And), (e.onWhereArrayQrySuccess = u)),
                                    e.processWhere_();
                            };
                        c();
                    }),
                    (t.prototype.onQueryFinished = function () {
                        !0 === this.isOr
                            ? this.orQuerySuccess_()
                            : !0 === this.isArrayQry
                            ? this.onWhereArrayQrySuccess()
                            : (!0 !== this.isTransaction && !0 !== this.isSubQuery) || this.onTransactionCompleted_();
                    }),
                    (t.prototype.initTransaction_ = function () {
                        this.createTransaction([this.tableName], this.onTransactionCompleted_, a.ReadOnly), (this.objectStore = this.transaction.objectStore(this.tableName));
                    }),
                    (t.prototype.processWhere_ = function () {
                        this.query.where.or && this.processOrLogic_(), this.goToWhereLogic();
                    }),
                    (t.prototype.orQueryFinish_ = function () {
                        (this.isOr = !1), (this.results = this.orInfo.results), (this.orInfo = null), this.removeDuplicates(), this.onQueryFinished();
                    }),
                    (t.prototype.orQuerySuccess_ = function () {
                        if (((this.orInfo.results = Be(this.orInfo.results, this.results)), !this.query.limit || this.query.limit > this.orInfo.results.length)) {
                            this.results = [];
                            var e = ce(this.orInfo.orQuery);
                            if (null != e) {
                                var t = {};
                                (t[e] = this.orInfo.orQuery[e]), delete this.orInfo.orQuery[e], (this.query.where = t), this.goToWhereLogic();
                            } else this.orQueryFinish_();
                        } else this.orQueryFinish_();
                    }),
                    (t.prototype.processOrLogic_ = function () {
                        (this.isOr = !0), (this.orInfo = { orQuery: this.query.where.or, results: [] }), delete this.query.where.or;
                    }),
                    t
                );
            })(Le),
            We = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Ke = (function (e) {
                function t() {
                    var t = (null !== e && e.apply(this, arguments)) || this;
                    return (
                        (t.resultCount = 0),
                        (t.onTransactionCompleted_ = function () {
                            null == t.error ? t.onSuccess(t.resultCount) : t.onError(t.error);
                        }),
                        t
                    );
                }
                return (
                    We(t, e),
                    (t.prototype.onQueryFinished = function () {
                        !0 === this.isTransaction && this.onTransactionCompleted_();
                    }),
                    t
                );
            })(_e),
            Ge = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Je = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Ge(t, e),
                    (t.prototype.executeWhereUndefinedLogic = function () {
                        var e,
                            t,
                            n = this;
                        this.objectStore.count
                            ? ((e = this.objectStore.count()).onsuccess = function () {
                                  (n.resultCount = e.result), n.onQueryFinished();
                              })
                            : ((e = this.objectStore.openCursor()).onsuccess = function (e) {
                                  (t = e.target.result) ? (++n.resultCount, t.continue()) : n.onQueryFinished();
                              });
                        e.onerror = this.onErrorOccured.bind(this);
                    }),
                    t
                );
            })(Ke),
            Me = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Ue = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Me(t, e),
                    (t.prototype.executeInLogic = function (e, t) {
                        var n,
                            r,
                            o = this,
                            i = this.objectStore.index(e),
                            u = function (e) {
                                return P(function (t, u) {
                                    ((r = i.openCursor(o.getKeyRange(e))).onsuccess = function (e) {
                                        (n = e.target.result) ? (o.whereCheckerInstance.check(n.value) && ++o.resultCount, n.continue()) : t();
                                    }),
                                        (r.onerror = u);
                                });
                            };
                        this.objectStore.count &&
                            (u = function (e) {
                                return P(function (t, n) {
                                    ((r = i.count(o.getKeyRange(e))).onsuccess = function (e) {
                                        (o.resultCount += e.target.result), t();
                                    }),
                                        (r.onerror = n);
                                });
                            }),
                            X(
                                t.map(function (e) {
                                    return u(e);
                                })
                            )
                                .then(function () {
                                    o.onQueryFinished();
                                })
                                .catch(function (e) {
                                    o.onErrorOccured(e);
                                });
                    }),
                    t
                );
            })(Je),
            ze = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            $e = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    ze(t, e),
                    (t.prototype.executeRegexLogic = function (e, t) {
                        var n,
                            r = this;
                        this.regexExpression = t;
                        var o = this.objectStore.index(e).openCursor();
                        (o.onsuccess = function (e) {
                            (n = e.target.result) ? (r.regexTest(n.key) && r.whereCheckerInstance.check(n.value) && ++r.resultCount, n.continue()) : r.onQueryFinished();
                        }),
                            (o.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(Ue),
            He = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Xe = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    He(t, e),
                    (t.prototype.executeWhereLogic = function (e, t, n) {
                        var r,
                            o,
                            i = this;
                        (t = n ? t[n] : t),
                            (1 === Object.keys(this.query.where).length && this.objectStore.count
                                ? function () {
                                      (r = i.objectStore.index(e).count(i.getKeyRange(t, n))).onsuccess = function () {
                                          (i.resultCount = r.result), i.onQueryFinished();
                                      };
                                  }
                                : function () {
                                      (r = i.objectStore.index(e).openCursor(i.getKeyRange(t, n))).onsuccess = function (e) {
                                          (o = e.target.result) ? (i.whereCheckerInstance.check(o.value) && ++i.resultCount, o.continue()) : i.onQueryFinished();
                                      };
                                  })(),
                            (r.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })($e),
            Ye = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Ze = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (o.onError = r), (o.onSuccess = n), (o.query = t), (o.tableName = t.from), o;
                }
                return (
                    Ye(t, e),
                    (t.prototype.execute = function () {
                        var e = this,
                            t = new ee(u.Count, this.query);
                        if ((t.checkAndModify(), null == t.error))
                            try {
                                var n = function () {
                                    new Ve(
                                        e.query,
                                        function (t) {
                                            (e.resultCount = t.length), e.onTransactionCompleted_();
                                        },
                                        e.onError
                                    ).execute();
                                };
                                null == this.query.join
                                    ? null != this.query.where
                                        ? this.query.where.or || Re(this.query.where)
                                            ? n()
                                            : (this.initTransaction_(), this.goToWhereLogic())
                                        : (this.initTransaction_(), this.executeWhereUndefinedLogic())
                                    : n();
                            } catch (e) {
                                this.onExceptionOccured(e);
                            }
                        else this.onError(t.error);
                    }),
                    (t.prototype.initTransaction_ = function () {
                        this.createTransaction([this.query.from], this.onTransactionCompleted_, a.ReadOnly), (this.objectStore = this.transaction.objectStore(this.query.from));
                    }),
                    t
                );
            })(Xe),
            et = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            tt = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (
                        (o.valuesAffected_ = []),
                        (o.onTransactionCompleted_ = function () {
                            null == o.error ? o.onSuccess(!0 === o.query.return ? o.valuesAffected_ : o.rowAffected) : o.onError(o.error);
                        }),
                        (o.onError = r),
                        (o.query = t),
                        (o.onSuccess = n),
                        (o.tableName = o.query.into),
                        o
                    );
                }
                return (
                    et(t, e),
                    (t.prototype.execute = function () {
                        var e = this,
                            t = new ee(u.Insert, this.query);
                        t.checkAndModify()
                            .then(function () {
                                (e.query = t.query), e.insertData_(e.query.values);
                            })
                            .catch(this.onError);
                    }),
                    (t.prototype.onQueryFinished_ = function () {
                        !0 === this.isTransaction && this.onTransactionCompleted_();
                    }),
                    (t.prototype.insertData_ = function (e) {
                        var t,
                            n,
                            r,
                            o = this;
                        (n = this.query.return
                            ? function (e) {
                                  o.valuesAffected_.push(e);
                              }
                            : function (e) {
                                  ++o.rowAffected;
                              }),
                            this.createTransaction([this.tableName], this.onTransactionCompleted_),
                            (t = this.transaction.objectStore(this.tableName)),
                            (r = this.query.upsert
                                ? function (e) {
                                      return t.put(e);
                                  }
                                : function (e) {
                                      return t.add(e);
                                  }),
                            X(
                                e.map(function (e) {
                                    return P(function (t, o) {
                                        var i = r(e);
                                        (i.onerror = o),
                                            (i.onsuccess = function () {
                                                n(e), t();
                                            });
                                    });
                                })
                            )
                                .then(function () {
                                    o.onQueryFinished_();
                                })
                                .catch(function (e) {
                                    o.transaction.abort(), o.onErrorOccured(e);
                                });
                    }),
                    t
                );
            })(he),
            nt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            rt = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return nt(t, e), (t.prototype.onQueryFinished = function () {}), t;
            })(_e),
            ot = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            it = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    ot(t, e),
                    (t.prototype.executeWhereUndefinedLogic = function () {
                        var e,
                            t = this,
                            n = this.objectStore.openCursor();
                        (n.onsuccess = function (n) {
                            (e = n.target.result) ? (e.delete(), ++t.rowAffected, e.continue()) : t.onQueryFinished();
                        }),
                            (n.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(rt),
            ut = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            ct = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    ut(t, e),
                    (t.prototype.executeInLogic = function (e, t) {
                        var n,
                            r,
                            o = this;
                        X(
                            t.map(function (t) {
                                return (
                                    (i = t),
                                    P(function (t, u) {
                                        ((r = o.objectStore.index(e).openCursor(o.getKeyRange(i))).onsuccess = function (e) {
                                            (n = e.target.result) ? (o.whereCheckerInstance.check(n.value) && (n.delete(), ++o.rowAffected), n.continue()) : t();
                                        }),
                                            (r.onerror = u);
                                    })
                                );
                                var i;
                            })
                        )
                            .then(function () {
                                o.onQueryFinished();
                            })
                            .catch(function (e) {
                                o.onErrorOccured(e);
                            });
                    }),
                    t
                );
            })(it),
            st = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            at = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    st(t, e),
                    (t.prototype.executeRegexLogic = function (e, t) {
                        var n,
                            r = this;
                        this.regexExpression = t;
                        var o = this.objectStore.index(e).openCursor();
                        (o.onsuccess = function (e) {
                            (n = e.target.result) ? (r.regexTest(n.key) && r.whereCheckerInstance.check(n.value) && (n.delete(), ++r.rowAffected), n.continue()) : r.onQueryFinished();
                        }),
                            (o.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(ct),
            lt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            ht = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    lt(t, e),
                    (t.prototype.executeWhereLogic = function (e, t, n) {
                        var r,
                            o,
                            i = this;
                        (t = n ? t[n] : t),
                            ((o = this.objectStore.index(e).openCursor(this.getKeyRange(t, n))).onsuccess = function (e) {
                                (r = e.target.result) ? (i.whereCheckerInstance.check(r.value) && (r.delete(), ++i.rowAffected), r.continue()) : i.onQueryFinished();
                            }),
                            (o.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(at),
            ft = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            pt = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (
                        (o.onTransactionCompleted_ = function () {
                            null == o.error ? o.onSuccess(o.rowAffected) : o.onError(o.error);
                        }),
                        (o.query = t),
                        (o.onSuccess = n),
                        (o.onError = r),
                        (o.tableName = o.query.from),
                        o
                    );
                }
                return (
                    ft(t, e),
                    (t.prototype.execute = function () {
                        var e = new ee(u.Remove, this.query);
                        if ((e.checkAndModify(), null == e.error))
                            try {
                                this.initTransaction_(), null != this.query.where ? (Re(this.query.where) ? this.processWhereArrayQry() : this.processWhere_()) : this.executeWhereUndefinedLogic();
                            } catch (e) {
                                this.onExceptionOccured(e);
                            }
                        else this.onError(e.error);
                    }),
                    (t.prototype.processWhereArrayQry = function () {
                        var e = this,
                            t = new Ve(
                                this.query,
                                function (t) {
                                    var n,
                                        r,
                                        o = [],
                                        i = e.getPrimaryKey(e.query.from);
                                    t.forEach(function (e) {
                                        o.push(e[i]);
                                    }),
                                        (t = null);
                                    var u = (((n = {})[i] = (((r = {})[s.In] = o), r)), n);
                                    (e.query[s.Where] = u), e.processWhere_();
                                },
                                this.onError
                            );
                        (t.isSubQuery = !0), t.execute();
                    }),
                    (t.prototype.processWhere_ = function () {
                        this.query.where.or && this.processOrLogic(), this.goToWhereLogic();
                    }),
                    (t.prototype.initTransaction_ = function () {
                        this.createTransaction([this.query.from], this.onTransactionCompleted_), (this.objectStore = this.transaction.objectStore(this.query.from));
                    }),
                    (t.prototype.onQueryFinished = function () {
                        !0 === this.isOr ? this.orQuerySuccess_() : !0 === this.isTransaction && this.onTransactionCompleted_();
                    }),
                    (t.prototype.orQuerySuccess_ = function () {
                        var e = ce(this._orInfo.OrQuery);
                        if (null != e) {
                            var t = {};
                            (t[e] = this._orInfo.OrQuery[e]), delete this._orInfo.OrQuery[e], (this.query.where = t), this.goToWhereLogic();
                        } else this.isOr = !0;
                    }),
                    (t.prototype.processOrLogic = function () {
                        (this.isOr = !0), (this._orInfo = { OrQuery: this.query.where.or }), delete this.query.where.or;
                    }),
                    t
                );
            })(ht),
            yt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            dt = function (e, t) {
                for (var n in e)
                    if (z(e[n]) !== i.Object) t[n] = e[n];
                    else
                        for (var r in e[n]) {
                            switch (r) {
                                case "+":
                                    t[n] += e[n][r];
                                    break;
                                case "-":
                                    t[n] -= e[n][r];
                                    break;
                                case "*":
                                    t[n] *= e[n][r];
                                    break;
                                case "/":
                                    t[n] /= e[n][r];
                                    break;
                                case "{push}":
                                    t[n].push(e[n][r]);
                                    break;
                                default:
                                    t[n] = e[n];
                            }
                            break;
                        }
                return t;
            },
            bt = (function (e) {
                function t() {
                    var t = (null !== e && e.apply(this, arguments)) || this;
                    return (
                        (t.onTransactionCompleted_ = function () {
                            t.error ? t.onError(t.error) : t.onSuccess(t.rowAffected);
                        }),
                        t
                    );
                }
                return (
                    yt(t, e),
                    (t.prototype.initTransaction = function () {
                        this.createTransaction([this.query.in], this.onTransactionCompleted_), (this.objectStore = this.transaction.objectStore(this.query.in));
                    }),
                    (t.prototype.onQueryFinished = function () {
                        !0 === this.isTransaction && this.onTransactionCompleted_();
                    }),
                    t
                );
            })(he),
            _t = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            vt = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    _t(t, e),
                    (t.prototype.executeWhereUndefinedLogic = function () {
                        var e,
                            t = this,
                            n = this.objectStore.openCursor();
                        (n.onsuccess = function (n) {
                            if ((e = n.target.result))
                                try {
                                    var r = e.update(dt(t.query.set, e.value));
                                    (r.onsuccess = function () {
                                        ++t.rowAffected, e.continue();
                                    }),
                                        (r.onerror = t.onErrorOccured.bind(t));
                                } catch (e) {
                                    t.onErrorOccured(e), t.transaction.abort();
                                }
                            else t.onQueryFinished();
                        }),
                            (n.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(bt),
            mt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            gt = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    mt(t, e),
                    (t.prototype.executeInLogic = function (e, t) {
                        var n,
                            r,
                            o = this,
                            i = this.objectStore.index(e);
                        X(
                            t.map(function (e) {
                                return (
                                    (t = e),
                                    P(function (e, u) {
                                        ((r = i.openCursor(o.getKeyRange(t))).onsuccess = function (t) {
                                            (n = t.target.result) ? (o.whereCheckerInstance.check(n.value) && (n.update(dt(o.query.set, n.value)), ++o.rowAffected), n.continue()) : e();
                                        }),
                                            (r.onerror = u);
                                    })
                                );
                                var t;
                            })
                        )
                            .then(function () {
                                o.onQueryFinished();
                            })
                            .catch(function (e) {
                                o.onErrorOccured(e);
                            });
                    }),
                    t
                );
            })(vt),
            Ot = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            St = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Ot(t, e),
                    (t.prototype.executeRegexLogic = function (e, t) {
                        var n,
                            r = this;
                        this.regexExpression = t;
                        var o = this.objectStore.index(e).openCursor();
                        (o.onsuccess = function (e) {
                            if ((n = e.target.result))
                                if (r.regexTest(n.key) && r.whereCheckerInstance.check(n.value))
                                    try {
                                        var t = n.update(dt(r.query.set, n.value));
                                        (t.onsuccess = function () {
                                            ++r.rowAffected, n.continue();
                                        }),
                                            (t.onerror = r.onErrorOccured.bind(r));
                                    } catch (e) {
                                        r.transaction.abort(), r.onErrorOccured(e);
                                    }
                                else n.continue();
                            else r.onQueryFinished();
                        }),
                            (o.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(gt),
            wt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            xt = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    wt(t, e),
                    (t.prototype.executeWhereLogic = function (e, t, n) {
                        var r,
                            o,
                            i = this;
                        (t = n ? t[n] : t),
                            ((o = this.objectStore.index(e).openCursor(this.getKeyRange(t, n))).onsuccess = function (e) {
                                if ((r = e.target.result))
                                    if (i.whereCheckerInstance.check(r.value))
                                        try {
                                            var t = r.update(dt(i.query.set, r.value));
                                            (t.onsuccess = function () {
                                                ++i.rowAffected, r.continue();
                                            }),
                                                (t.onerror = i.onErrorOccured.bind(i));
                                        } catch (e) {
                                            i.transaction.abort(), i.onErrorOccured(e);
                                        }
                                    else r.continue();
                                else i.onQueryFinished();
                            }),
                            (o.onerror = this.onErrorOccured.bind(this));
                    }),
                    t
                );
            })(St),
            kt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Et = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (o.onSuccess = n), (o.onError = r), (o.query = t), (o.tableName = o.query.in), o;
                }
                return (
                    kt(t, e),
                    (t.prototype.execute = function () {
                        var e = new ee(u.Update, this.query);
                        if ((e.checkAndModify(), null == e.error))
                            try {
                                this.initTransaction(),
                                    null != this.query.where ? (this.query.where.or || Re(this.query.where) ? this.executeComplexLogic_() : this.goToWhereLogic()) : this.executeWhereUndefinedLogic();
                            } catch (e) {
                                this.onExceptionOccured(e);
                            }
                        else this.onError(e.error);
                    }),
                    (t.prototype.executeComplexLogic_ = function () {
                        var e = this,
                            t = new Ve(
                                { from: this.query.in, where: this.query.where, ignoreCase: this.query.ignoreCase },
                                function (t) {
                                    var n,
                                        r,
                                        o = e.getPrimaryKey(e.query.in),
                                        i = [];
                                    t.forEach(function (e) {
                                        i.push(e[o]);
                                    }),
                                        (t = null);
                                    var u = (((n = {})[o] = (((r = {})[s.In] = i), r)), n);
                                    (e.query.ignoreCase = null), (e.query[s.Where] = u), e.initTransaction(), e.goToWhereLogic();
                                },
                                this.onError
                            );
                        (t.isSubQuery = !0), t.execute();
                    }),
                    t
                );
            })(xt),
            Dt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            qt = (function (e) {
                function t(t, n, r) {
                    var o = e.call(this) || this;
                    return (o.reqQueue = []), (o.isQueryExecuting = !1), (o.isTxStarted_ = !1), (o.query = t), (o.onError = r), (o.onSuccess = n), (o.results = {}), o;
                }
                return (
                    Dt(t, e),
                    (t.prototype.execute = function () {
                        var e = this,
                            t = this.getNotExistingTable_(this.query.tables);
                        null == t
                            ? X(
                                  this.query.tables.map(function (t) {
                                      return Y(e.getTable(t));
                                  })
                              )
                                  .then(function (t) {
                                      t.forEach(function (t, n) {
                                          ee.autoIncrementValues[e.query.tables[n]] = t;
                                      }),
                                          e.startExecution_();
                                  })
                                  .catch(this.onError)
                            : this.onError(new W(r.TableNotExist, { tableName: t }).get());
                    }),
                    (t.prototype.startExecution_ = function () {
                        var e = this,
                            t = this.query.method,
                            n = self[t];
                        if (!n) return this.onError({ type: r.MethodNotExist, message: "method " + t + " does not exist." });
                        n.call(this, {
                            data: this.query.data,
                            insert: function (t) {
                                return e.pushReq_({ name: u.Insert, query: t });
                            },
                            select: function (t) {
                                return e.pushReq_({ name: u.Select, query: t });
                            },
                            update: function (t) {
                                return e.pushReq_({ name: u.Update, query: t });
                            },
                            remove: function (t) {
                                return e.pushReq_({ name: u.Remove, query: t });
                            },
                            count: function (t) {
                                return e.pushReq_({ name: u.Count, query: t });
                            },
                            setResult: function (t, n) {
                                e.results[t] = n;
                            },
                            getResult: function (t) {
                                return e.results[t];
                            },
                            abort: function (t) {
                                e.abortTx_(t);
                            },
                            start: function () {
                                e.checkQueries_(e.reqQueue)
                                    .then(function (t) {
                                        e.startTx_();
                                    })
                                    .catch(function (t) {
                                        e.onError(t);
                                    });
                            },
                        });
                    }),
                    (t.prototype.startTx_ = function () {
                        try {
                            (this.isTxStarted_ = !0), this.initTx_(this.query.tables), this.processExecutionOfQry_();
                        } catch (e) {
                            this.onExceptionOccured(e);
                        }
                    }),
                    (t.prototype.initTx_ = function (e) {
                        this.createTransaction(e, this.onTxCompleted_.bind(this));
                    }),
                    (t.prototype.onTxCompleted_ = function () {
                        this.onSuccess(this.results);
                    }),
                    (t.prototype.onReqFinished_ = function (e) {
                        var t = this.reqQueue.shift();
                        t &&
                            (this.error
                                ? (this.abortTx_("automatic abort of transaction due to error occured"), this.onErrorOccured(this.error))
                                : ((this.isQueryExecuting = !1), t.onSuccess && t.onSuccess(e), this.processExecutionOfQry_()));
                    }),
                    (t.prototype.abortTx_ = function (e) {
                        null != this.transaction && this.transaction.abort();
                    }),
                    (t.prototype.executeRequest_ = function (e) {
                        var t;
                        this.isQueryExecuting = !0;
                        var n = this.onReqFinished_.bind(this),
                            r = this.onError.bind(this),
                            o = e.query;
                        switch (e.name) {
                            case u.Select:
                                t = new Ve(o, n, r);
                                break;
                            case u.Insert:
                                t = new tt(o, n, r);
                                break;
                            case u.Update:
                                t = new Et(o, n, r);
                                break;
                            case u.Remove:
                                t = new pt(o, n, r);
                                break;
                            case u.Count:
                                t = new Ze(o, n, r);
                        }
                        (t.isTransaction = !0), t.execute();
                    }),
                    (t.prototype.pushReq_ = function (e) {
                        var t = this,
                            n = function () {
                                t.reqQueue.push(e);
                            },
                            r = P(function (n, r) {
                                (e.onSuccess = function (e) {
                                    n(e);
                                }),
                                    (e.onError = function (e) {
                                        (t.error = e), r(e);
                                    });
                            });
                        return (
                            !0 === this.isTxStarted_
                                ? this.checkQueries_([e])
                                      .then(function () {
                                          n(), t.processExecutionOfQry_();
                                      })
                                      .catch(function (e) {
                                          (t.error = e), t.abortTx_(JSON.stringify(e));
                                      })
                                : n(),
                            r
                        );
                    }),
                    (t.prototype.processExecutionOfQry_ = function () {
                        this.reqQueue.length > 0 && !1 === this.isQueryExecuting && this.executeRequest_(this.reqQueue[0]);
                    }),
                    (t.prototype.checkQueries_ = function (e) {
                        return X(
                            e.map(function (e) {
                                return new ee(e.name, e.query).checkAndModify();
                            })
                        );
                    }),
                    (t.prototype.getNotExistingTable_ = function (e) {
                        var t = this,
                            n = null;
                        return (
                            e.every(function (e) {
                                return !1 !== t.isTableExist(e) || ((n = e), !1);
                            }),
                            n
                        );
                    }),
                    t
                );
            })(he),
            Ct = (function () {
                function e(e) {
                    (this.columns = []), (this.requireDelete = !1), (this.requireCreation = !1), (this.name = e.name), (this.version = e.version), (this.columns = e.columns), this.setPrimaryKey_();
                }
                return (
                    (e.prototype.createMetaData = function (e) {
                        var t = this;
                        return P(function (n) {
                            (t.callback_ = n), t.setRequireDelete_(e), t.setDbVersion_(e);
                        });
                    }),
                    (e.prototype.setPrimaryKey_ = function () {
                        var e = this;
                        this.columns.every(function (t) {
                            return (e.primaryKey = t.primaryKey ? t.name : ""), !t.primaryKey;
                        });
                    }),
                    (e.prototype.setRequireDelete_ = function (e) {
                        var t = this;
                        B.get("JsStore_" + e + "_" + this.name + "_Version").then(function (e) {
                            null == e ? (t.requireCreation = !0) : e < t.version && (t.requireDelete = !0);
                        });
                    }),
                    (e.prototype.setDbVersion_ = function (e) {
                        var t = this;
                        (M.activeDbVersion = M.activeDbVersion > this.version ? M.activeDbVersion : this.version),
                            B.set("JsStore_" + e + "_Db_Version", M.activeDbVersion),
                            B.set("JsStore_" + e + "_" + this.name + "_Version", M.activeDbVersion).then(function () {
                                (t.version = M.activeDbVersion), t.callback_(t);
                            });
                    }),
                    e
                );
            })(),
            Tt = (function () {
                function e(e) {
                    (this.tables = []), (this.dbName = e.name), (this.tables = e.tables);
                }
                return (
                    (e.prototype.createMetaData = function () {
                        var e = this;
                        return X(
                            this.tables.map(function (t) {
                                return new Ct(t).createMetaData(e.dbName);
                            })
                        );
                    }),
                    e
                );
            })(),
            jt = function (e) {
                (this.name = e.name),
                    (this.autoIncrement = null != e.autoIncrement && e.autoIncrement),
                    (this.primaryKey = null != e.primaryKey && e.primaryKey),
                    (this.unique = null != e.unique && e.unique),
                    (this.notNull = null != e.notNull && e.notNull),
                    (this.dataType = null != e.dataType ? e.dataType : e.autoIncrement ? "number" : null),
                    (this.default = e.default),
                    (this.multiEntry = null != e.multiEntry && e.multiEntry),
                    (this.enableSearch = null == e.enableSearch || e.enableSearch),
                    (this.keyPath = e.keyPath);
            },
            It = function (e) {
                for (var t in ((this.columns = []), (this.name = e.name), (this.version = null == e.version ? 1 : e.version), e.columns)) {
                    var n = { name: t };
                    for (var r in e.columns[t]) {
                        var o = e.columns[t][r];
                        switch (r) {
                            case "primaryKey":
                            case "autoIncrement":
                            case "unique":
                            case "dataType":
                            case "enableSearch":
                            case "keyPath":
                            case "multiEntry":
                            case "default":
                            case "notNull":
                                n[r] = o;
                        }
                    }
                    this.columns.push(new jt(n));
                }
            },
            At = function (e) {
                var t = this;
                (this.tables = []),
                    (this.name = e.name),
                    e.tables.forEach(function (e) {
                        t.tables.push(new It(e));
                    });
            },
            Nt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Qt = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Nt(t, e),
                    (t.prototype.execute = function (e, t, n) {
                        var r,
                            o = 0,
                            i = {},
                            u = !0,
                            c = e.length;
                        if (
                            (e.every(function (t, n) {
                                return !(n + 1 < c && t.from !== e[n + 1].from) || ((u = !1), !1);
                            }),
                            u)
                        ) {
                            var s = this.getPrimaryKey(e[0].from);
                            r = function (e) {
                                return e[s];
                            };
                        } else
                            r = function (e) {
                                var t = "";
                                for (var n in e) t += e[n];
                                return t;
                            };
                        var a = function () {
                            if (o < e.length)
                                new Ve(
                                    e[o++],
                                    function (e) {
                                        e.forEach(function (e) {
                                            i[r(e)] = e;
                                        }),
                                            a();
                                    },
                                    n
                                ).execute();
                            else {
                                var u = [];
                                for (var c in i) u.push(i[c]);
                                t(u);
                            }
                        };
                        a();
                    }),
                    t
                );
            })(he),
            Lt = (function () {
                var e = function (t, n) {
                    return (e =
                        Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array &&
                            function (e, t) {
                                e.__proto__ = t;
                            }) ||
                        function (e, t) {
                            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                        })(t, n);
                };
                return function (t, n) {
                    function r() {
                        this.constructor = t;
                    }
                    e(t, n), (t.prototype = null === n ? Object.create(n) : ((r.prototype = n.prototype), new r()));
                };
            })(),
            Rt = function () {
                return (Rt =
                    Object.assign ||
                    function (e) {
                        for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in (t = arguments[n])) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                        return e;
                    }).apply(this, arguments);
            },
            Pt = (function (e) {
                function t() {
                    return (null !== e && e.apply(this, arguments)) || this;
                }
                return (
                    Lt(t, e),
                    (t.prototype.execute = function (e, t, n) {
                        var r = this;
                        this.query = e;
                        var o,
                            i = 0,
                            u = {},
                            c = {},
                            s = !0,
                            a = e.queries,
                            l = a.length;
                        if (
                            (a.every(function (e, t) {
                                return !(t + 1 < l && e.from !== a[t + 1].from) || ((s = !1), !1);
                            }),
                            s)
                        ) {
                            var h = this.getPrimaryKey(a[0].from);
                            o = function (e) {
                                return e[h];
                            };
                        } else
                            o = function (e) {
                                var t = "";
                                for (var n in e) t += e[n];
                                return t;
                            };
                        var f = function () {
                            if (i < l)
                                new Ve(
                                    a[i],
                                    function (e) {
                                        (u = {}),
                                            e.forEach(function (e) {
                                                var t = o(e);
                                                0 === i ? (c[t] = e) : null != c[t] && (u[t] = e);
                                            }),
                                            i > 0 && (c = Rt({}, u)),
                                            ++i,
                                            f();
                                    },
                                    n
                                ).execute();
                            else {
                                var s,
                                    h = [],
                                    p = void 0,
                                    y = e.skip,
                                    d = e.limit,
                                    b = !1,
                                    _ = function () {
                                        h.push(u[s]);
                                    },
                                    v = function () {
                                        h.length < d ? _() : (b = !0);
                                    },
                                    m = function (e) {
                                        0 === y ? e() : --y;
                                    };
                                if (
                                    ((p =
                                        e.skip && e.limit
                                            ? function () {
                                                  m(function () {
                                                      v();
                                                  });
                                              }
                                            : e.limit
                                            ? v
                                            : e.skip
                                            ? function () {
                                                  m(function () {
                                                      _();
                                                  });
                                              }
                                            : function () {
                                                  _();
                                              }),
                                    d)
                                ) {
                                    for (s in u) if ((p(s), b)) break;
                                } else for (s in u) p(s);
                                (r.results = h), (r.query.join = {}), r.processOrderBy(), r.processGroupDistinctAggr(), t(r.results);
                            }
                        };
                        f();
                    }),
                    t
                );
            })(Ae),
            Ft = (function () {
                function e(e) {
                    (this.onQueryFinished = e), (ee.autoIncrementValues = {});
                }
                return (
                    (e.prototype.checkConnectionAndExecuteLogic = function (e) {
                        var t = this;
                        switch ((W.log("request executing:" + e.name), e.name)) {
                            case u.InitDb:
                            case u.IsDbExist:
                            case u.GetDbVersion:
                            case u.GetDbList:
                            case u.GetDbSchema:
                            case u.Get:
                            case u.Set:
                            case u.ChangeLogStatus:
                            case u.Terminate:
                            case u.OpenDb:
                            case u.InitKeyStore:
                            case u.CloseDb:
                                var n = this.checkForIdbSupport_();
                                null == n ? this.executeLogic_(e) : this.returnResult_({ errorDetails: n, errorOccured: !0 });
                                break;
                            default:
                                switch (this.dbStatus_.conStatus) {
                                    case h.Connected:
                                        this.executeLogic_(e);
                                        break;
                                    case h.Closed:
                                        !0 === this.isDbDeletedByBrowser_
                                            ? this.initDb_(
                                                  null,
                                                  function () {
                                                      (t.isDbDeletedByBrowser_ = !1), t.checkConnectionAndExecuteLogic(e);
                                                  },
                                                  e.onError
                                              )
                                            : this.initDb_(
                                                  this.activeDb_,
                                                  function () {
                                                      t.checkConnectionAndExecuteLogic(e);
                                                  },
                                                  e.onError
                                              );
                                }
                        }
                    }),
                    (e.prototype.changeLogStatus_ = function (e, t, n) {
                        (V.isLogEnabled = e), t();
                    }),
                    (e.prototype.returnResult_ = function (e) {
                        !0 === V.isRuningInWorker ? self.postMessage(e) : this.onQueryFinished(e);
                    }),
                    (e.prototype.executeLogic_ = function (t) {
                        var n = this,
                            o = function (e) {
                                n.returnResult_({ returnedValue: e });
                            },
                            i = function (e) {
                                n.returnResult_({ errorDetails: e, errorOccured: !0 });
                            };
                        switch (((e.isTransactionQuery = t.name === u.Transaction), t.name)) {
                            case u.InitDb:
                                !0 === this.isDbDeletedByBrowser_
                                    ? this.initDb_(
                                          null,
                                          function () {
                                              (n.isDbDeletedByBrowser_ = !1), o();
                                          },
                                          i
                                      )
                                    : this.initDb_(t.query, o, i);
                                break;
                            case u.OpenDb:
                                this.openDb_(t.query, o, i);
                                break;
                            case u.Select:
                                new Ve(t.query, o, i).execute();
                                break;
                            case u.Insert:
                                new tt(t.query, o, i).execute();
                                break;
                            case u.Update:
                                new Et(t.query, o, i).execute();
                                break;
                            case u.Remove:
                                new pt(t.query, o, i).execute();
                                break;
                            case u.IsDbExist:
                                this.isDbExist_(t.query, o, i);
                                break;
                            case u.GetDbVersion:
                                this.getDbVersion_(t.query).then(o).catch(i);
                                break;
                            case u.GetDbList:
                                this.getDbList_().then(o).catch(i);
                                break;
                            case u.GetDbSchema:
                                this.getDbSchema_(t.query).then(o).catch(i);
                                break;
                            case u.Clear:
                                new pe(t.query, o, i).execute();
                                break;
                            case u.DropDb:
                                this.dropDb_(o, i);
                                break;
                            case u.Count:
                                new Ze(t.query, o, i).execute();
                                break;
                            case u.Get:
                                this.get_(t.query).then(o).catch(i);
                                break;
                            case u.Set:
                                this.set_(t.query).then(o).catch(i);
                                break;
                            case u.ChangeLogStatus:
                                this.changeLogStatus_(t.query, o, i);
                                break;
                            case u.Transaction:
                                new qt(t.query, o, i).execute();
                                break;
                            case u.CloseDb:
                            case u.Terminate:
                                this.terminate_(o, i);
                                break;
                            case u.Union:
                                new Qt().execute(t.query, o, i);
                                break;
                            case u.InitKeyStore:
                                this.initKeyStore_(o);
                                break;
                            case u.Intersect:
                                new Pt().execute(t.query, o, i);
                                break;
                            case u.ImportScripts:
                                try {
                                    importScripts.apply(void 0, t.query), o();
                                } catch (e) {
                                    i({ type: r.ImportScriptsFailed, message: e.message });
                                }
                                break;
                            default:
                                0;
                        }
                    }),
                    (e.prototype.openDb_ = function (e, t, n) {
                        var o = this;
                        null != this.activeDb_ && this.activeDb_.name === e
                            ? this.processCreateDb(this.activeDb_).then(t).catch(n)
                            : this.getDbSchema_(e)
                                  .then(function (i) {
                                      null != i ? o.processCreateDb(i).then(t).catch(n) : n(new W(r.DbNotExist, { dbName: e }).get());
                                  })
                                  .catch(n);
                    }),
                    (e.prototype.initKeyStore_ = function (e) {
                        B.init()
                            .then(e())
                            .catch(function () {
                                M.dbStatus = { conStatus: h.UnableToStart, lastError: r.IndexedDbNotSupported };
                            });
                    }),
                    (e.prototype.getDbSchema_ = function (e) {
                        return M.getDbSchema(e);
                    }),
                    (e.prototype.terminate_ = function (e, t) {
                        var n = this;
                        B.close().then(function () {
                            n.closeDb_(), e();
                        });
                    }),
                    Object.defineProperty(e.prototype, "isDbDeletedByBrowser_", {
                        get: function () {
                            return M.isDbDeletedByBrowser;
                        },
                        set: function (e) {
                            M.isDbDeletedByBrowser = e;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.getDbList_ = function () {
                        return M.getDbList();
                    }),
                    Object.defineProperty(e.prototype, "activeDb_", {
                        get: function () {
                            return M.activeDb;
                        },
                        set: function (e) {
                            M.activeDb = e;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.closeDb_ = function () {
                        M.dbStatus.conStatus === h.Connected && ((M.dbStatus.conStatus = h.ClosedByJsStore), M.dbConnection.close());
                    }),
                    (e.prototype.dropDb_ = function (e, t) {
                        this.closeDb_(), new J(e, t).deleteDb();
                    }),
                    (e.prototype.processCreateDb = function (e) {
                        var t = this;
                        return P(function (n, r) {
                            new Tt(e).createMetaData().then(function (o) {
                                (t.activeDb_ = e),
                                    new de(function (r) {
                                        (t.activeDb_ = e), r && B.set("JsStore_" + e.name + "_Schema", e), n(r);
                                    }, r).execute(o);
                            });
                        });
                    }),
                    (e.prototype.initDb_ = function (e, t, n) {
                        var r = this;
                        null == e
                            ? this.processCreateDb(this.activeDb_)
                            : (this.closeDb_(),
                              this.getDbVersion_(e.name)
                                  .then(function (o) {
                                      (r.activeDbVersion_ = o || 1), r.processCreateDb(new At(e)).then(t).catch(n);
                                  })
                                  .catch(n));
                    }),
                    Object.defineProperty(e.prototype, "activeDbVersion_", {
                        get: function () {
                            return M.activeDbVersion;
                        },
                        set: function (e) {
                            M.activeDbVersion = e;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.getDbVersion_ = function (e) {
                        return M.getDbVersion(e);
                    }),
                    Object.defineProperty(e.prototype, "dbStatus_", {
                        get: function () {
                            return M.dbStatus;
                        },
                        enumerable: !1,
                        configurable: !0,
                    }),
                    (e.prototype.checkForIdbSupport_ = function () {
                        if (this.dbStatus_.conStatus === h.UnableToStart) {
                            var e = { type: this.dbStatus_.lastError };
                            switch (e.type) {
                                case r.IndexedDbNotSupported:
                                    e.message = "Browser does not support IndexedDB";
                                    break;
                                default:
                                    e.message = "unknown error occured";
                            }
                            return e;
                        }
                    }),
                    (e.prototype.isDbExist_ = function (e, t, n) {
                        z(e) === i.String
                            ? this.getDbVersion_(e).then(function (e) {
                                  t(Boolean(e));
                              })
                            : this.getDbVersion_(e.dbName).then(function (n) {
                                  t(e.table.version <= n);
                              });
                    }),
                    (e.prototype.get_ = function (e) {
                        return B.get(e);
                    }),
                    (e.prototype.set_ = function (e) {
                        return B.set(e.key, e.value);
                    }),
                    (e.isTransactionQuery = !1),
                    e
                );
            })(),
            Bt = function () {
                void 0 === self.alert &&
                    "undefined" == typeof ServiceWorkerGlobalScope &&
                    ((V.isRuningInWorker = !0),
                    (self.onmessage = function (e) {
                        new Ft().checkConnectionAndExecuteLogic(e.data);
                    }));
            },
            Vt = function () {
                M.dbStatus = { conStatus: h.UnableToStart, lastError: r.IndexedDbNotSupported };
            };
        !(function () {
            try {
                indexedDB || (indexedDB = self.mozIndexedDB || self.webkitIndexedDB || self.msIndexedDB),
                    indexedDB
                        ? ((IDBTransaction = IDBTransaction || self.webkitIDBTransaction || self.msIDBTransaction),
                          (self.IDBKeyRange = self.IDBKeyRange || self.webkitIDBKeyRange || self.msIDBKeyRange))
                        : Vt();
            } catch (e) {
                Vt();
            }
        })(),
            Bt();
    },
});
//# sourceMappingURL=jsstore.worker.min.js.map
